{"version":3,"file":"vue-query.mjs","sources":["../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../src/core/utils.ts","../src/core/logger.ts","../src/core/subscribable.ts","../src/core/focusManager.ts","../src/core/onlineManager.ts","../src/core/retryer.ts","../src/core/query.ts","../src/core/queryCache.ts","../src/core/mutation.ts","../src/core/mutationCache.ts","../src/core/infiniteQueryBehavior.ts","../src/core/queryClient.ts","../src/core/queryObserver.ts","../src/core/queriesObserver.ts","../src/core/infiniteQueryObserver.ts","../src/core/mutationObserver.ts","../src/use/logger.ts","../src/use/setLogger.ts","../src/use/QueryClientProvider.ts","../src/use/useIsFetching.ts","../src/use/useMutation.ts","../src/use/useBaseQuery.ts","../src/use/useQuery.ts","../src/use/useQueries.ts","../src/use/useInfiniteQuery.ts"],"sourcesContent":["export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import { isRef } from 'vue'\n\nimport type { Query } from './query'\nimport type {\n  MutationFunction,\n  MutationKeyWithRef,\n  MutationOptions,\n  MutationOptionsWithRef,\n  QueryFunction,\n  QueryKey,\n  QueryKeyHashFunction,\n  QueryKeyWithRef,\n  QueryOptions,\n  QueryOptionsWithRef,\n  QueryStatus,\n} from './types'\n\n// TYPES\n\nexport interface QueryFilters {\n  /**\n   * Include or exclude active queries\n   */\n  active?: boolean\n  /**\n   * Match query key exactly\n   */\n  exact?: boolean\n  /**\n   * Include or exclude inactive queries\n   */\n  inactive?: boolean\n  /**\n   * Include queries matching this predicate function\n   */\n  predicate?: (query: Query) => boolean\n  /**\n   * Include queries matching this query key\n   */\n  queryKey?: QueryKey\n  /**\n   * Include or exclude stale queries\n   */\n  stale?: boolean\n  /**\n   * Include or exclude fetching queries\n   */\n  fetching?: boolean\n}\n\nexport type DataUpdateFunction<TInput, TOutput> = (input: TInput) => TOutput\n\nexport type Updater<TInput, TOutput> =\n  | TOutput\n  | DataUpdateFunction<TInput, TOutput>\n\n// UTILS\n\nexport const isServer = typeof window === 'undefined'\n\nexport function noop(): undefined {\n  return undefined\n}\n\nexport function functionalUpdate<TInput, TOutput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as DataUpdateFunction<TInput, TOutput>)(input)\n    : updater\n}\n\nexport function isValidTimeout(value: any): value is number {\n  return typeof value === 'number' && value >= 0 && value !== Infinity\n}\n\nexport function ensureArray<T>(value: T | T[]): T[] {\n  return Array.isArray(value) ? value : [value]\n}\n\nexport function difference<T>(array1: T[], array2: T[]): T[] {\n  return array1.filter(x => array2.indexOf(x) === -1)\n}\n\nexport function timeUntilStale(updatedAt: number, staleTime?: number): number {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0)\n}\n\nexport function parseQueryArgs<TOptions extends QueryOptions<any, any, any>>(\n  arg1: QueryKeyWithRef | QueryOptionsWithRef<any, any, any>,\n  arg2?: QueryFunction<any> | QueryOptionsWithRef<any, any, any>,\n  arg3?: QueryOptionsWithRef<any, any, any>\n): TOptions {\n  if (!isQueryKey(arg1)) {\n    return arg1 as TOptions\n  }\n\n  if (typeof arg2 === 'function') {\n    return { ...arg3, queryKey: arg1, queryFn: arg2 } as TOptions\n  }\n\n  return unwrapRefs({ ...arg2, queryKey: arg1 }) as TOptions\n}\n\nexport function parseMutationArgs<\n  TOptions extends MutationOptions<any, any, any, any>\n>(\n  arg1:\n    | MutationKeyWithRef\n    | MutationFunction<any, any>\n    | MutationOptionsWithRef<any, any, any, any>,\n  arg2?:\n    | MutationFunction<any, any>\n    | MutationOptionsWithRef<any, any, any, any>,\n  arg3?: MutationOptionsWithRef<any, any, any, any>\n): TOptions {\n  if (isQueryKey(arg1)) {\n    if (typeof arg2 === 'function') {\n      return unwrapRefs({\n        ...arg3,\n        mutationKey: arg1,\n        mutationFn: arg2,\n      }) as TOptions\n    }\n    return unwrapRefs({ ...arg2, mutationKey: arg1 }) as TOptions\n  }\n\n  if (typeof arg1 === 'function') {\n    return unwrapRefs({ ...arg2, mutationFn: arg1 }) as TOptions\n  }\n\n  return unwrapRefs({ ...arg1 }) as TOptions\n}\n\nexport function parseFilterArgs<\n  TFilters extends QueryFilters,\n  TOptions = unknown\n>(\n  arg1?: QueryKeyWithRef | TFilters,\n  arg2?: TFilters | TOptions,\n  arg3?: TOptions\n): [TFilters, TOptions | undefined] {\n  return (isQueryKey(arg1)\n    ? [{ ...arg2, queryKey: unwrapRefs(arg1) }, arg3]\n    : [arg1 || {}, arg2]) as [TFilters, TOptions]\n}\n\nexport function matchQuery(\n  filters: QueryFilters,\n  query: Query<any, any>\n): boolean {\n  const {\n    active,\n    exact,\n    fetching,\n    inactive,\n    predicate,\n    queryKey,\n    stale,\n  } = filters\n\n  if (isQueryKey(queryKey)) {\n    if (exact) {\n      const hashFn = getQueryKeyHashFn(query.options)\n      if (query.queryHash !== hashFn(queryKey)) {\n        return false\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false\n    }\n  }\n\n  let isActive\n\n  if (inactive === false || (active && !inactive)) {\n    isActive = true\n  } else if (active === false || (inactive && !active)) {\n    isActive = false\n  }\n\n  if (typeof isActive === 'boolean' && query.isActive() !== isActive) {\n    return false\n  }\n\n  if (typeof stale === 'boolean' && query.isStale() !== stale) {\n    return false\n  }\n\n  if (typeof fetching === 'boolean' && query.isFetching() !== fetching) {\n    return false\n  }\n\n  if (predicate && !predicate(query)) {\n    return false\n  }\n\n  return true\n}\n\nexport function getQueryKeyHashFn(\n  options?: QueryOptions<any, any>\n): QueryKeyHashFunction {\n  return options?.queryKeyHashFn || hashQueryKey\n}\n\n/**\n * Default query keys hash function.\n */\nexport function hashQueryKey(queryKey: QueryKey): string {\n  return stableValueHash(queryKey)\n}\n\n/**\n * Hashes the value into a stable hash.\n */\nexport function stableValueHash(value: any): string {\n  return JSON.stringify(value, (_, val) =>\n    isPlainObject(val)\n      ? Object.keys(val)\n          .sort()\n          .reduce((result, key) => {\n            result[key] = val[key]\n            return result\n          }, {} as any)\n      : val\n  )\n}\n\n/**\n * Checks if key `b` partially matches with key `a`.\n */\nexport function partialMatchKey(\n  a: string | unknown[],\n  b: string | unknown[]\n): boolean {\n  return partialDeepEqual(ensureArray(a), ensureArray(b))\n}\n\n/**\n * Checks if `b` partially matches with `a`.\n */\nexport function partialDeepEqual(a: any, b: any): boolean {\n  if (a === b) {\n    return true\n  }\n\n  if (typeof a !== typeof b) {\n    return false\n  }\n\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    return !Object.keys(b).some(key => !partialDeepEqual(a[key], b[key]))\n  }\n\n  return false\n}\n\n/**\n * it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nexport function replaceEqualDeep<T>(a: unknown, b: T): T\nexport function replaceEqualDeep(a: any, b: any) {\n  if (a === b) return a\n\n  const array = Array.isArray(a) && Array.isArray(b)\n  const isSameObject = array || (isPlainObject(a) && isPlainObject(b))\n\n  if (isSameObject) {\n    if (array) {\n      const bSize = b.length\n      // omit array keys\n      if (a.length > bSize) {\n        a.splice(bSize)\n      }\n\n      // pick array keys\n      for (let i = 0; i < bSize; i++) {\n        a[i] = replaceEqualDeep(a[i], b[i])\n      }\n    } else {\n      const aKeys = Object.keys(a)\n      const bKeys = Object.keys(b)\n      const hash = new Set(bKeys)\n\n      for (let i = 0, len = aKeys.length; i < len; i++) {\n        const key = aKeys[i]\n        if (!hash.has(key)) {\n          // omit object keys\n          delete a[key]\n        }\n      }\n\n      for (let i = 0, len = bKeys.length; i < len; i++) {\n        const key = bKeys[i]\n        // pick object keys\n        a[key] = replaceEqualDeep(a[key], b[key])\n      }\n    }\n  }\n\n  return isSameObject ? a : b\n}\n\n/**\n * it will replace any equal shallow children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nexport function replaceShallowEqualDeep<T>(a: unknown, b: T): T\nexport function replaceShallowEqualDeep(a: any, b: any) {\n  if (a === b) return a\n\n  const array = Array.isArray(a) && Array.isArray(b)\n  const isSameObject = array || (isPlainObject(a) && isPlainObject(b))\n\n  if (isSameObject) {\n    if (array) {\n      const bSize = b.length\n      // omit array keys\n      if (a.length > bSize) {\n        a.splice(bSize)\n      }\n\n      // pick array keys\n      for (let i = 0; i < bSize; i++) {\n        a[i] = b[i]\n      }\n    } else {\n      const aKeys = Object.keys(a)\n      const bKeys = Object.keys(b)\n      const hash = new Set(bKeys)\n\n      for (let i = 0, len = aKeys.length; i < len; i++) {\n        const key = aKeys[i]\n        if (!hash.has(key)) {\n          // omit object keys\n          delete a[key]\n        }\n      }\n\n      for (let i = 0, len = bKeys.length; i < len; i++) {\n        const key = bKeys[i]\n        // pick object keys\n        a[key] = b[key]\n      }\n    }\n  }\n\n  return isSameObject ? a : b\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nexport function isPlainObject(o: any): o is Object {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has modified constructor\n  const ctor = o.constructor\n  if (typeof ctor === 'undefined') {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any): boolean {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function isQueryKey(value: any): value is QueryKey {\n  return typeof value === 'string' || Array.isArray(value)\n}\n\nexport function isError(value: any): value is Error {\n  return value instanceof Error\n}\n\nexport function sleep(timeout: number): Promise<void> {\n  return new Promise(resolve => {\n    setTimeout(resolve, timeout)\n  })\n}\n\nexport function getStatusProps<T extends QueryStatus>(status: T) {\n  return {\n    status,\n    isLoading: status === 'loading',\n    isSuccess: status === 'success',\n    isError: status === 'error',\n    isIdle: status === 'idle',\n  }\n}\n\n/**\n * Schedules a microtask.\n * This can be useful to schedule state updates after rendering.\n */\nexport function scheduleMicrotask(callback: () => void): void {\n  Promise.resolve()\n    .then(callback)\n    .catch(error =>\n      setTimeout(() => {\n        throw error\n      })\n    )\n}\n\n/**\n * it will deeply unwrap the value of ref from ref\n */\nexport function unwrapRefs(refs: any) {\n  if (isRef(refs)) {\n    return refs.value\n  }\n\n  if (typeof refs === 'function') return refs\n\n  const array = Array.isArray(refs)\n\n  if (array || isPlainObject(refs)) {\n    const items = array ? refs : Object.keys(refs)\n    const size = items.length\n    const copy: any = array ? [] : {}\n\n    for (let i = 0; i < size; i++) {\n      const key = array ? i : items[i]\n\n      copy[key] = isRef(refs[key]) ? refs[key].value : unwrapRefs(refs[key])\n    }\n    return copy\n  }\n\n  return refs\n}\n","import { noop } from './utils'\n\n// TYPES\n\nexport interface Logger {\n  log: LogFunction\n  warn: LogFunction\n  error: LogFunction\n}\n\ntype LogFunction = (...args: any[]) => void\n\n// FUNCTIONS\n\nlet logger: Logger = console || {\n  error: noop,\n  warn: noop,\n  log: noop,\n}\n\nexport function getLogger(): Logger {\n  return logger\n}\n\nexport function setLogger(newLogger: Logger) {\n  logger = newLogger\n}\n","type Listener = () => void\n\nexport class Subscribable<TListener extends Function = Listener> {\n  protected listeners: TListener[]\n\n  constructor() {\n    this.listeners = []\n  }\n\n  subscribe(listener?: TListener): () => void {\n    const callback = listener || (() => undefined)\n\n    this.listeners.push(callback as TListener)\n\n    this.onSubscribe()\n\n    return () => {\n      this.listeners = this.listeners.filter(x => x !== callback)\n      this.onUnsubscribe()\n    }\n  }\n\n  hasListeners(): boolean {\n    return this.listeners.length > 0\n  }\n\n  protected onSubscribe(): void {\n    // Do nothing\n  }\n\n  protected onUnsubscribe(): void {\n    // Do nothing\n  }\n}\n","import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\nclass FocusManager extends Subscribable {\n  private focused?: boolean\n  private removeEventListener?: () => void\n\n  protected onSubscribe(): void {\n    if (!this.removeEventListener) {\n      this.setDefaultEventListener()\n    }\n  }\n\n  setEventListener(\n    setup: (onFocus: () => void) => (focused?: boolean) => void\n  ): void {\n    if (this.removeEventListener) {\n      this.removeEventListener()\n    }\n    this.removeEventListener = setup((focused?: boolean) => {\n      if (typeof focused === 'boolean') {\n        this.setFocused(focused)\n      } else {\n        this.onFocus()\n      }\n    })\n  }\n\n  setFocused(focused?: boolean): void {\n    this.focused = focused\n\n    if (focused) {\n      this.onFocus()\n    }\n  }\n\n  onFocus(): void {\n    this.listeners.forEach(listener => {\n      listener()\n    })\n  }\n\n  isFocused(): boolean {\n    if (typeof this.focused === 'boolean') {\n      return this.focused\n    }\n\n    // document global can be unavailable in react native\n    if (typeof document === 'undefined') {\n      return true\n    }\n\n    return [undefined, 'visible', 'prerender'].includes(\n      document.visibilityState\n    )\n  }\n\n  private setDefaultEventListener() {\n    if (!isServer && window?.addEventListener) {\n      this.setEventListener(onFocus => {\n        // Listen to visibillitychange and focus\n        window.addEventListener('visibilitychange', onFocus, false)\n        window.addEventListener('focus', onFocus, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('visibilitychange', onFocus)\n          window.removeEventListener('focus', onFocus)\n        }\n      })\n    }\n  }\n}\n\nexport const focusManager = new FocusManager()\n","import { Subscribable } from './subscribable'\nimport { isServer } from './utils'\n\nclass OnlineManager extends Subscribable {\n  private online?: boolean\n  private removeEventListener?: () => void\n\n  protected onSubscribe(): void {\n    if (!this.removeEventListener) {\n      this.setDefaultEventListener()\n    }\n  }\n\n  setEventListener(\n    setup: (setOnline: () => void) => (online?: boolean) => void\n  ): void {\n    if (this.removeEventListener) {\n      this.removeEventListener()\n    }\n    this.removeEventListener = setup((online?: boolean) => {\n      if (typeof online === 'boolean') {\n        this.setOnline(online)\n      } else {\n        this.onOnline()\n      }\n    })\n  }\n\n  setOnline(online?: boolean): void {\n    this.online = online\n\n    if (online) {\n      this.onOnline()\n    }\n  }\n\n  onOnline(): void {\n    this.listeners.forEach(listener => {\n      listener()\n    })\n  }\n\n  isOnline(): boolean {\n    if (typeof this.online === 'boolean') {\n      return this.online\n    }\n\n    return navigator.onLine === undefined || navigator.onLine\n  }\n\n  private setDefaultEventListener() {\n    if (!isServer && window?.addEventListener) {\n      this.setEventListener(onOnline => {\n        // Listen to online\n        window.addEventListener('online', onOnline, false)\n\n        return () => {\n          // Be sure to unsubscribe if a new handler is set\n          window.removeEventListener('online', onOnline)\n        }\n      })\n    }\n  }\n}\n\nexport const onlineManager = new OnlineManager()\n","import { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { functionalUpdate, sleep } from './utils'\n\n// TYPES\n\ninterface RetryerConfig<TData = unknown, TError = unknown> {\n  fn: () => TData | Promise<TData>\n  onFail?: (failureCount: number, error: TError) => void\n  onPause?: () => void\n  onContinue?: () => void\n  retry?: RetryValue<TError>\n  retryDelay?: RetryDelayValue\n}\n\nexport type RetryValue<TError> = boolean | number | ShouldRetryFunction<TError>\n\ntype ShouldRetryFunction<TError = unknown> = (\n  failureCount: number,\n  error: TError\n) => boolean\n\nexport type RetryDelayValue = number | RetryDelayFunction\n\ntype RetryDelayFunction = (failureCount: number) => number\n\nfunction defaultRetryDelay(failureCount: number) {\n  return Math.min(1000 * 2 ** failureCount, 30000)\n}\n\ninterface Cancelable {\n  cancel(): void\n}\n\nexport function isCancelable(value: any): value is Cancelable {\n  return typeof value?.cancel === 'function'\n}\n\nexport interface CancelOptions {\n  revert?: boolean\n  silent?: boolean\n}\n\nexport class CancelledError {\n  revert?: boolean\n  silent?: boolean\n  constructor(options?: CancelOptions) {\n    this.revert = options?.revert\n    this.silent = options?.silent\n  }\n}\n\nexport function isCancelledError(value: any): value is CancelledError {\n  return value instanceof CancelledError\n}\n\n// CLASS\n\nexport class Retryer<TData = unknown, TError = unknown> {\n  cancel: (options?: CancelOptions) => void\n  cancelRetry: () => void\n  continue: () => void\n  failureCount: number\n  isPaused: boolean\n  isResolved: boolean\n  isTransportCancelable: boolean\n  promise: Promise<TData>\n\n  constructor(config: RetryerConfig<TData, TError>) {\n    let cancelRetry = false\n    let cancelFn: ((options?: CancelOptions) => void) | undefined\n    let continueFn: ((value?: unknown) => void) | undefined\n    let promiseResolve: (data: TData) => void\n    let promiseReject: (error: TError) => void\n\n    this.cancel = cancelOptions => cancelFn?.(cancelOptions)\n    this.cancelRetry = () => {\n      cancelRetry = true\n    }\n    this.continue = () => continueFn?.()\n    this.failureCount = 0\n    this.isPaused = false\n    this.isResolved = false\n    this.isTransportCancelable = false\n    this.promise = new Promise<TData>((outerResolve, outerReject) => {\n      promiseResolve = outerResolve\n      promiseReject = outerReject\n    })\n\n    const resolve = (value: any) => {\n      this.isResolved = true\n      continueFn?.()\n      promiseResolve(value)\n    }\n\n    const reject = (value: any) => {\n      this.isResolved = true\n      continueFn?.()\n      promiseReject(value)\n    }\n\n    const pause = () => {\n      return new Promise(continueResolve => {\n        continueFn = continueResolve\n        this.isPaused = true\n        config.onPause?.()\n      }).then(() => {\n        continueFn = undefined\n        this.isPaused = false\n        config.onContinue?.()\n      })\n    }\n\n    // Create loop function\n    const run = () => {\n      // Do nothing if already resolved\n      if (this.isResolved) {\n        return\n      }\n\n      let promiseOrValue: any\n\n      // Execute query\n      try {\n        promiseOrValue = config.fn()\n      } catch (error) {\n        promiseOrValue = Promise.reject(error)\n      }\n\n      // Create callback to cancel this fetch\n      cancelFn = cancelOptions => {\n        reject(new CancelledError(cancelOptions))\n\n        // Cancel transport if supported\n        if (isCancelable(promiseOrValue)) {\n          try {\n            promiseOrValue.cancel()\n          } catch {}\n        }\n      }\n\n      // Check if the transport layer support cancellation\n      this.isTransportCancelable = isCancelable(promiseOrValue)\n\n      Promise.resolve(promiseOrValue)\n        .then(resolve)\n        .catch(error => {\n          // Stop if the fetch is already resolved\n          if (this.isResolved) {\n            return\n          }\n\n          // Do we need to retry the request?\n          const retry = config.retry ?? 3\n          const retryDelay = config.retryDelay ?? defaultRetryDelay\n          const delay = functionalUpdate(retryDelay, this.failureCount) || 0\n          const shouldRetry =\n            retry === true ||\n            (typeof retry === 'number' && this.failureCount < retry) ||\n            (typeof retry === 'function' && retry(this.failureCount, error))\n\n          if (cancelRetry || !shouldRetry) {\n            // We are done if the query does not need to be retried\n            reject(error)\n            return\n          }\n\n          this.failureCount++\n\n          // Notify on fail\n          config.onFail?.(this.failureCount, error)\n\n          // Delay\n          sleep(delay)\n            // Pause if the document is not visible or when the device is offline\n            .then(() => {\n              if (!focusManager.isFocused() || !onlineManager.isOnline()) {\n                return pause()\n              }\n            })\n            .then(() => {\n              if (cancelRetry) {\n                reject(error)\n              } else {\n                run()\n              }\n            })\n        })\n    }\n\n    // Start loop\n    run()\n  }\n}\n","import { reactive, readonly } from 'vue'\n\nimport {\n  Updater,\n  ensureArray,\n  functionalUpdate,\n  isValidTimeout,\n  noop,\n  replaceEqualDeep,\n  timeUntilStale,\n} from './utils'\nimport type {\n  InitialDataFunction,\n  QueryKey,\n  QueryOptions,\n  QueryStatus,\n  QueryFunctionContext,\n} from './types'\nimport type { QueryCache } from './queryCache'\nimport type { QueryObserver } from './queryObserver'\nimport { getLogger } from './logger'\nimport { Retryer, CancelOptions, isCancelledError } from './retryer'\n\n// TYPES\n\ninterface QueryConfig<TQueryFnData, TError, TData> {\n  cache: QueryCache\n  queryKey: QueryKey\n  queryHash: string\n  options?: QueryOptions<TQueryFnData, TError, TData>\n  defaultOptions?: QueryOptions<TQueryFnData, TError, TData>\n  state?: QueryState<TData, TError>\n}\n\nexport interface QueryState<TData = unknown, TError = unknown> {\n  data: TData | undefined\n  dataUpdateCount: number\n  dataUpdatedAt: number\n  error: TError | null\n  errorUpdateCount: number\n  errorUpdatedAt: number\n  fetchFailureCount: number\n  fetchMeta: any\n  isFetching: boolean\n  isInvalidated: boolean\n  isPaused: boolean\n  status: QueryStatus\n}\n\nexport interface FetchContext<TQueryFnData, TError, TData> {\n  fetchFn: () => unknown | Promise<unknown>\n  fetchOptions?: FetchOptions\n  options: QueryOptions<TQueryFnData, TError, TData>\n  queryKey: QueryKey\n  state: QueryState<TData, TError>\n}\n\nexport interface QueryBehavior<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n> {\n  onFetch: (context: FetchContext<TQueryFnData, TError, TData>) => void\n}\n\nexport interface FetchOptions {\n  cancelRefetch?: boolean\n  meta?: any\n}\n\nexport interface SetDataOptions {\n  updatedAt?: number\n}\n\ninterface FailedAction {\n  type: 'failed'\n}\n\ninterface FetchAction {\n  type: 'fetch'\n  meta?: any\n}\n\ninterface SuccessAction<TData> {\n  data: TData | undefined\n  type: 'success'\n  dataUpdatedAt?: number\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface InvalidateAction {\n  type: 'invalidate'\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError> {\n  type: 'setState'\n  state: QueryState<TData, TError>\n}\n\nexport type Action<TData, TError> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction\n  | FetchAction\n  | InvalidateAction\n  | PauseAction\n  | SetStateAction<TData, TError>\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Query<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n> {\n  queryKey: QueryKey\n  queryHash: string\n  options!: QueryOptions<TQueryFnData, TError, TData>\n  initialState: QueryState<TData, TError>\n  state: QueryState<TData, TError>\n  cacheTime!: number\n\n  private innerState: QueryState<TData, TError>\n  private cache: QueryCache\n  private promise?: Promise<TData>\n  private gcTimeout?: number\n  private retryer?: Retryer<unknown, TError>\n  private observers: QueryObserver<any, any, any, any>[]\n  private defaultOptions?: QueryOptions<TQueryFnData, TError, TData>\n\n  constructor(config: QueryConfig<TQueryFnData, TError, TData>) {\n    this.defaultOptions = config.defaultOptions\n    this.setOptions(config.options)\n    this.observers = []\n    this.cache = config.cache\n    this.queryKey = config.queryKey\n    this.queryHash = config.queryHash\n    this.initialState = config.state || this.getDefaultState(this.options)\n    this.innerState = reactive(this.initialState) as QueryState<TData, TError>\n    this.state = readonly(this.innerState) as QueryState<TData, TError>\n    this.scheduleGc()\n  }\n\n  private setOptions(\n    options?: QueryOptions<TQueryFnData, TError, TData>\n  ): void {\n    this.options = { ...this.defaultOptions, ...options }\n\n    // Default to 5 minutes if not cache time is set\n    this.cacheTime = Math.max(\n      this.cacheTime || 0,\n      this.options.cacheTime ?? 5 * 60 * 1000\n    )\n  }\n\n  setDefaultOptions(options: QueryOptions<TQueryFnData, TError, TData>): void {\n    this.defaultOptions = options\n  }\n\n  private scheduleGc(): void {\n    this.clearGcTimeout()\n\n    if (isValidTimeout(this.cacheTime)) {\n      this.gcTimeout = setTimeout(() => {\n        this.optionalRemove()\n      }, this.cacheTime)\n    }\n  }\n\n  private clearGcTimeout() {\n    clearTimeout(this.gcTimeout)\n    this.gcTimeout = undefined\n  }\n\n  private optionalRemove() {\n    if (!this.observers.length && !this.state.isFetching) {\n      this.cache.remove(this)\n    }\n  }\n\n  setData(\n    updater: Updater<TData | undefined, TData>,\n    options?: SetDataOptions\n  ): TData {\n    const prevData = this.innerState.data\n\n    // Get the new data\n    let data = functionalUpdate(updater, prevData)\n\n    // Use prev data if an isDataEqual function is defined and returns `true`\n    if (this.options.isDataEqual?.(prevData, data)) {\n      data = prevData as TData\n    } else if (this.options.structuralSharing !== false) {\n      // Structurally share data between prev and new data if needed\n      data = replaceEqualDeep(prevData, data)\n    }\n\n    // Set data and mark it as cached\n    this.dispatch({\n      data,\n      type: 'success',\n      dataUpdatedAt: options?.updatedAt,\n    })\n\n    return data\n  }\n\n  setState(state: QueryState<TData, TError>): void {\n    this.dispatch({ type: 'setState', state })\n  }\n\n  cancel(options?: CancelOptions): Promise<void> {\n    const promise = this.promise\n    this.retryer?.cancel(options)\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve()\n  }\n\n  destroy(): void {\n    this.clearGcTimeout()\n    this.cancel()\n  }\n\n  reset(): void {\n    this.destroy()\n    this.setState(this.initialState)\n  }\n\n  isActive(): boolean {\n    return this.observers.some(observer => observer.options.enabled !== false)\n  }\n\n  isFetching(): boolean {\n    return this.state.isFetching\n  }\n\n  isStale(): boolean {\n    return (\n      this.state.isInvalidated ||\n      !this.state.dataUpdatedAt ||\n      this.observers.some(observer => observer.getReadonlyResult().isStale)\n    )\n  }\n\n  isStaleByTime(staleTime = 0): boolean {\n    return (\n      this.state.isInvalidated ||\n      !this.state.dataUpdatedAt ||\n      !timeUntilStale(this.state.dataUpdatedAt, staleTime)\n    )\n  }\n\n  onFocus(): void {\n    const observer = this.observers.find(x => x.willFetchOnWindowFocus())\n\n    if (observer) {\n      observer.refetch()\n    }\n\n    // Continue fetch if currently paused\n    this.retryer?.continue()\n  }\n\n  onOnline(): void {\n    const observer = this.observers.find(x => x.willFetchOnReconnect())\n\n    if (observer) {\n      observer.refetch()\n    }\n\n    // Continue fetch if currently paused\n    this.retryer?.continue()\n  }\n\n  addObserver(observer: QueryObserver<any, any, any, any>): void {\n    if (this.observers.indexOf(observer) === -1) {\n      this.observers.push(observer)\n\n      // Stop the query from being garbage collected\n      this.clearGcTimeout()\n\n      this.cache.notify(this)\n    }\n  }\n\n  removeObserver(observer: QueryObserver<any, any, any, any>): void {\n    if (this.observers.indexOf(observer) !== -1) {\n      this.observers = this.observers.filter(x => x !== observer)\n\n      if (!this.observers.length) {\n        // If the transport layer does not support cancellation\n        // we'll let the query continue so the result can be cached\n        if (this.retryer) {\n          if (this.retryer.isTransportCancelable) {\n            this.retryer.cancel()\n          } else {\n            this.retryer.cancelRetry()\n          }\n        }\n\n        if (this.cacheTime) {\n          this.scheduleGc()\n        } else {\n          this.cache.remove(this)\n        }\n      }\n\n      this.cache.notify(this)\n    }\n  }\n\n  invalidate(): void {\n    if (!this.state.isInvalidated) {\n      this.dispatch({ type: 'invalidate' })\n    }\n  }\n\n  fetch(\n    options?: QueryOptions<TQueryFnData, TError, TData>,\n    fetchOptions?: FetchOptions\n  ): Promise<TData> {\n    if (this.state.isFetching)\n      if (this.state.dataUpdatedAt && fetchOptions?.cancelRefetch) {\n        // Silently cancel current fetch if the user wants to cancel refetches\n        this.cancel({ silent: true })\n      } else if (this.promise) {\n        // Return current promise if we are already fetching\n        return this.promise\n      }\n\n    // Update config if passed, otherwise the config from the last execution is used\n    if (options) {\n      this.setOptions(options)\n    }\n\n    // Use the options from the first observer with a query function if no function is found.\n    // This can happen when the query is hydrated or created with setQueryData.\n    if (!this.options.queryFn) {\n      const observer = this.observers.find(x => x.options.queryFn)\n      if (observer) {\n        this.setOptions(observer.options)\n      }\n    }\n\n    // Create query function context\n    const queryKey = ensureArray(this.queryKey)\n    const queryFnContext: QueryFunctionContext = {\n      queryKey,\n      pageParam: undefined,\n    }\n\n    // Create fetch function\n    const fetchFn = () =>\n      this.options.queryFn\n        ? this.options.queryFn(queryFnContext)\n        : Promise.reject('Missing queryFn')\n\n    // Trigger behavior hook\n    const context: FetchContext<TQueryFnData, TError, TData> = {\n      fetchOptions,\n      options: this.options,\n      queryKey,\n      state: this.state,\n      fetchFn,\n    }\n\n    if (this.options.behavior?.onFetch) {\n      this.options.behavior?.onFetch(context)\n    }\n\n    // Set to fetching state if not already in it\n    if (\n      !this.state.isFetching ||\n      this.state.fetchMeta !== context.fetchOptions?.meta\n    ) {\n      this.dispatch({ type: 'fetch', meta: context.fetchOptions?.meta })\n    }\n\n    // Try to fetch the data\n    this.retryer = new Retryer({\n      fn: context.fetchFn,\n      onFail: () => {\n        this.dispatch({ type: 'failed' })\n      },\n      onPause: () => {\n        this.dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.dispatch({ type: 'continue' })\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n    })\n\n    this.promise = this.retryer.promise\n      .then(data => this.setData(data as TData))\n      .catch(error => {\n        // Set error state if needed\n        if (!(isCancelledError(error) && error.silent)) {\n          this.dispatch({\n            type: 'error',\n            error,\n          })\n        }\n\n        // Log error\n        if (!isCancelledError(error)) {\n          getLogger().error(error)\n        }\n\n        // Propagate error\n        throw error\n      })\n      .finally(() => {\n        // Remove query after fetching if cache time is 0\n        if (this.cacheTime === 0) {\n          this.optionalRemove()\n        }\n      })\n\n    return this.promise\n  }\n\n  private dispatch(action: Action<TData, TError>): void {\n    Object.assign(this.innerState, this.reducer(this.state, action))\n\n    this.observers.forEach(observer => {\n      observer.onQueryUpdate(action)\n    })\n\n    this.cache.notify(this)\n  }\n\n  protected getDefaultState(\n    options: QueryOptions<TQueryFnData, TError, TData>\n  ): QueryState<TData, TError> {\n    const data =\n      typeof options.initialData === 'function'\n        ? (options.initialData as InitialDataFunction<TData>)()\n        : options.initialData\n\n    const hasData = typeof data !== 'undefined'\n\n    return {\n      data,\n      dataUpdateCount: 0,\n      dataUpdatedAt: hasData ? Date.now() : 0,\n      error: null,\n      errorUpdateCount: 0,\n      errorUpdatedAt: 0,\n      fetchFailureCount: 0,\n      fetchMeta: null,\n      isFetching: false,\n      isInvalidated: false,\n      isPaused: false,\n      status: hasData ? 'success' : 'idle',\n    }\n  }\n\n  protected reducer(\n    state: QueryState<TData, TError>,\n    action: Action<TData, TError>\n  ): QueryState<TData, TError> {\n    switch (action.type) {\n      case 'failed':\n        return {\n          ...state,\n          fetchFailureCount: state.fetchFailureCount + 1,\n        }\n      case 'pause':\n        return {\n          ...state,\n          isPaused: true,\n        }\n      case 'continue':\n        return {\n          ...state,\n          isPaused: false,\n        }\n      case 'fetch':\n        return {\n          ...state,\n          fetchFailureCount: 0,\n          fetchMeta: action.meta ?? null,\n          isFetching: true,\n          isPaused: false,\n          status: state.status === 'idle' ? 'loading' : state.status,\n        }\n      case 'success':\n        return {\n          ...state,\n          data: action.data,\n          dataUpdateCount: state.dataUpdateCount + 1,\n          dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n          error: null,\n          fetchFailureCount: 0,\n          isFetching: false,\n          isInvalidated: false,\n          isPaused: false,\n          status: 'success',\n        }\n      case 'error':\n        const error = action.error as unknown\n\n        if (isCancelledError(error) && error.revert) {\n          return {\n            ...state,\n            fetchFailureCount: 0,\n            isFetching: false,\n            isPaused: false,\n            status: state.status === 'loading' ? 'idle' : state.status,\n          }\n        }\n\n        return {\n          ...state,\n          error: error as TError,\n          errorUpdateCount: state.errorUpdateCount + 1,\n          errorUpdatedAt: Date.now(),\n          fetchFailureCount: state.fetchFailureCount + 1,\n          isFetching: false,\n          isPaused: false,\n          status: 'error',\n        }\n      case 'invalidate':\n        return {\n          ...state,\n          isInvalidated: true,\n        }\n      case 'setState':\n        return {\n          ...state,\n          ...action.state,\n        }\n      default:\n        return state\n    }\n  }\n}\n","import {\n  QueryFilters,\n  getQueryKeyHashFn,\n  matchQuery,\n  parseFilterArgs,\n} from './utils'\nimport { Query, QueryState } from './query'\nimport type { QueryKeyWithRef, QueryOptions } from './types'\nimport type { QueryClient } from './queryClient'\nimport { Subscribable } from './subscribable'\n\n// TYPES\n\ninterface QueryHashMap {\n  [hash: string]: Query<any, any>\n}\n\ntype QueryCacheListener = (query?: Query) => void\n\n// CLASS\n\nexport class QueryCache extends Subscribable<QueryCacheListener> {\n  private queries: Query<any, any>[]\n  private queriesMap: QueryHashMap\n\n  constructor() {\n    super()\n\n    this.queries = []\n    this.queriesMap = {}\n  }\n\n  build<TQueryFnData, TError, TData>(\n    client: QueryClient,\n    options: QueryOptions<TQueryFnData, TError, TData>,\n    state?: QueryState<TData, TError>\n  ): Query<TQueryFnData, TError, TData> {\n    const hashFn = getQueryKeyHashFn(options)\n    const queryKey = options.queryKey!\n    const queryHash = options.queryHash ?? hashFn(queryKey)\n    let query = this.get<TQueryFnData, TError, TData>(queryHash)\n\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey),\n      })\n      this.add(query)\n    }\n\n    return query\n  }\n\n  add(query: Query<any, any>): void {\n    if (!this.queriesMap[query.queryHash]) {\n      this.queriesMap[query.queryHash] = query\n      this.queries.push(query)\n      this.notify(query)\n    }\n  }\n\n  remove(query: Query<any, any>): void {\n    const queryInMap = this.queriesMap[query.queryHash]\n\n    if (queryInMap) {\n      query.destroy()\n\n      this.queries = this.queries.filter(x => x !== query)\n\n      if (queryInMap === query) {\n        delete this.queriesMap[query.queryHash]\n      }\n\n      this.notify(query)\n    }\n  }\n\n  clear(): void {\n    this.queries.forEach(query => {\n      this.remove(query)\n    })\n  }\n\n  get<TQueryFnData = unknown, TError = unknown, TData = TQueryFnData>(\n    queryHash: string\n  ): Query<TQueryFnData, TError, TData> | undefined {\n    return this.queriesMap[queryHash]\n  }\n\n  getAll(): Query[] {\n    return this.queries\n  }\n\n  find<TQueryFnData = unknown, TError = unknown, TData = TQueryFnData>(\n    arg1: QueryKeyWithRef,\n    arg2?: QueryFilters\n  ): Query<TQueryFnData, TError, TData> | undefined {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    return this.queries.find(query => matchQuery(filters, query))\n  }\n\n  findAll(queryKey?: QueryKeyWithRef, filters?: QueryFilters): Query[]\n  findAll(filters?: QueryFilters): Query[]\n  findAll(arg1?: QueryKeyWithRef | QueryFilters, arg2?: QueryFilters): Query[]\n  findAll(arg1?: QueryKeyWithRef | QueryFilters, arg2?: QueryFilters): Query[] {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    return filters\n      ? this.queries.filter(query => matchQuery(filters, query))\n      : this.queries\n  }\n\n  notify(query?: Query<any, any>) {\n    this.listeners.forEach(listener => {\n      listener(query)\n    })\n  }\n\n  onFocus(): void {\n    this.queries.forEach(query => {\n      query.onFocus()\n    })\n  }\n\n  onOnline(): void {\n    this.queries.forEach(query => {\n      query.onOnline()\n    })\n  }\n}\n","import type { MutationOptions, MutationStatus } from './types'\nimport type { MutationCache } from './mutationCache'\nimport type { MutationObserver } from './mutationObserver'\nimport { getLogger } from './logger'\nimport { Retryer } from './retryer'\nimport { noop } from './utils'\n\n// TYPES\n\ninterface MutationConfig<TData, TError, TVariables, TContext> {\n  mutationId: number\n  mutationCache: MutationCache\n  options: MutationOptions<TData, TError, TVariables, TContext>\n  defaultOptions?: MutationOptions<TData, TError, TVariables, TContext>\n  state?: MutationState<TData, TError, TVariables, TContext>\n}\n\nexport interface MutationState<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n> {\n  context: TContext | undefined\n  data: TData | undefined\n  error: TError | null\n  failureCount: number\n  isPaused: boolean\n  status: MutationStatus\n  variables: TVariables | undefined\n}\n\ninterface FailedAction {\n  type: 'failed'\n}\n\ninterface LoadingAction<TVariables, TContext> {\n  type: 'loading'\n  variables?: TVariables\n  context?: TContext\n}\n\ninterface SuccessAction<TData> {\n  type: 'success'\n  data: TData\n}\n\ninterface ErrorAction<TError> {\n  type: 'error'\n  error: TError\n}\n\ninterface PauseAction {\n  type: 'pause'\n}\n\ninterface ContinueAction {\n  type: 'continue'\n}\n\ninterface SetStateAction<TData, TError, TVariables, TContext> {\n  type: 'setState'\n  state: MutationState<TData, TError, TVariables, TContext>\n}\n\nexport type Action<TData, TError, TVariables, TContext> =\n  | ContinueAction\n  | ErrorAction<TError>\n  | FailedAction\n  | LoadingAction<TVariables, TContext>\n  | PauseAction\n  | SetStateAction<TData, TError, TVariables, TContext>\n  | SuccessAction<TData>\n\n// CLASS\n\nexport class Mutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n> {\n  state: MutationState<TData, TError, TVariables, TContext>\n  options: MutationOptions<TData, TError, TVariables, TContext>\n  mutationId: number\n\n  private observers: MutationObserver<TData, TError, TVariables, TContext>[]\n  private mutationCache: MutationCache\n  private retryer?: Retryer<TData, TError>\n\n  constructor(config: MutationConfig<TData, TError, TVariables, TContext>) {\n    this.options = {\n      ...config.defaultOptions,\n      ...config.options,\n    }\n    this.mutationId = config.mutationId\n    this.mutationCache = config.mutationCache\n    this.observers = []\n    this.state = config.state || getDefaultState()\n  }\n\n  setState(state: MutationState<TData, TError, TVariables, TContext>): void {\n    this.dispatch({ type: 'setState', state })\n  }\n\n  addObserver(observer: MutationObserver<any, any, any, any>): void {\n    if (this.observers.indexOf(observer) === -1) {\n      this.observers.push(observer)\n    }\n  }\n\n  removeObserver(observer: MutationObserver<any, any, any, any>): void {\n    this.observers = this.observers.filter(x => x !== observer)\n  }\n\n  cancel(): Promise<void> {\n    if (this.retryer) {\n      this.retryer.cancel()\n      return this.retryer.promise.then(noop).catch(noop)\n    }\n    return Promise.resolve()\n  }\n\n  continue(): Promise<TData> {\n    if (this.retryer) {\n      this.retryer.continue()\n      return this.retryer.promise\n    }\n    return this.execute()\n  }\n\n  execute(): Promise<TData> {\n    let data: TData\n\n    const restored = this.state.status === 'loading'\n\n    let promise = Promise.resolve()\n\n    if (!restored) {\n      this.dispatch({ type: 'loading', variables: this.options.variables! })\n      promise = promise\n        .then(() => this.options.onMutate?.(this.state.variables!))\n        .then(context => {\n          if (context !== this.state.context) {\n            this.dispatch({\n              type: 'loading',\n              context,\n              variables: this.state.variables,\n            })\n          }\n        })\n    }\n\n    return promise\n      .then(() => this.executeMutation())\n      .then(result => {\n        data = result\n      })\n      .then(() =>\n        this.options.onSuccess?.(\n          data,\n          this.state.variables!,\n          this.state.context!\n        )\n      )\n      .then(() =>\n        this.options.onSettled?.(\n          data,\n          null,\n          this.state.variables!,\n          this.state.context\n        )\n      )\n      .then(() => {\n        this.dispatch({ type: 'success', data })\n        return data\n      })\n      .catch(error => {\n        getLogger().error(error)\n        return Promise.resolve()\n          .then(() =>\n            this.options.onError?.(\n              error,\n              this.state.variables!,\n              this.state.context\n            )\n          )\n          .then(() =>\n            this.options.onSettled?.(\n              undefined,\n              error,\n              this.state.variables!,\n              this.state.context\n            )\n          )\n          .then(() => {\n            this.dispatch({ type: 'error', error })\n            throw error\n          })\n      })\n  }\n\n  private executeMutation(): Promise<TData> {\n    this.retryer = new Retryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject('No mutationFn found')\n        }\n        return this.options.mutationFn(this.state.variables!)\n      },\n      onFail: () => {\n        this.dispatch({ type: 'failed' })\n      },\n      onPause: () => {\n        this.dispatch({ type: 'pause' })\n      },\n      onContinue: () => {\n        this.dispatch({ type: 'continue' })\n      },\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n    })\n\n    return this.retryer.promise\n  }\n\n  private dispatch(action: Action<TData, TError, TVariables, TContext>): void {\n    this.state = reducer(this.state, action)\n\n    this.observers.forEach(observer => {\n      observer.onMutationUpdate(action)\n    })\n    this.mutationCache.notify(this)\n  }\n}\n\nexport function getDefaultState<\n  TData,\n  TError,\n  TVariables,\n  TContext\n>(): MutationState<TData, TError, TVariables, TContext> {\n  return {\n    context: undefined,\n    data: undefined,\n    error: null,\n    failureCount: 0,\n    isPaused: false,\n    status: 'idle',\n    variables: undefined,\n  }\n}\n\nfunction reducer<TData, TError, TVariables, TContext>(\n  state: MutationState<TData, TError, TVariables, TContext>,\n  action: Action<TData, TError, TVariables, TContext>\n): MutationState<TData, TError, TVariables, TContext> {\n  switch (action.type) {\n    case 'failed':\n      return {\n        ...state,\n        failureCount: state.failureCount + 1,\n      }\n    case 'pause':\n      return {\n        ...state,\n        isPaused: true,\n      }\n    case 'continue':\n      return {\n        ...state,\n        isPaused: false,\n      }\n    case 'loading':\n      return {\n        ...state,\n        context: action.context,\n        data: undefined,\n        error: null,\n        isPaused: false,\n        status: 'loading',\n        variables: action.variables,\n      }\n    case 'success':\n      return {\n        ...state,\n        data: action.data,\n        error: null,\n        status: 'success',\n        isPaused: false,\n      }\n    case 'error':\n      return {\n        ...state,\n        data: undefined,\n        error: action.error,\n        failureCount: state.failureCount + 1,\n        isPaused: false,\n        status: 'error',\n      }\n    case 'setState':\n      return {\n        ...state,\n        ...action.state,\n      }\n    default:\n      return state\n  }\n}\n","import type { MutationOptions } from './types'\nimport type { QueryClient } from './queryClient'\nimport { Mutation, MutationState } from './mutation'\nimport { noop } from './utils'\nimport { Subscribable } from './subscribable'\n\n// TYPES\n\ntype MutationCacheListener = (mutation?: Mutation) => void\n\n// CLASS\n\nexport class MutationCache extends Subscribable<MutationCacheListener> {\n  private mutations: Mutation<any, any, any, any>[]\n  private mutationId: number\n\n  constructor() {\n    super()\n    this.mutations = []\n    this.mutationId = 0\n  }\n\n  build<TData, TError, TVariables, TContext>(\n    client: QueryClient,\n    options: MutationOptions<TData, TError, TVariables, TContext>,\n    state?: MutationState<TData, TError, TVariables, TContext>\n  ): Mutation<TData, TError, TVariables, TContext> {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.mutationId,\n      options: client.defaultMutationOptions(options),\n      state,\n      defaultOptions: options.mutationKey\n        ? client.getMutationDefaults(options.mutationKey)\n        : undefined,\n    })\n\n    this.add(mutation)\n\n    return mutation\n  }\n\n  add(mutation: Mutation<any, any, any, any>): void {\n    this.mutations.push(mutation)\n    this.notify(mutation)\n  }\n\n  remove(mutation: Mutation<any, any, any, any>): void {\n    this.mutations = this.mutations.filter(x => x !== mutation)\n    mutation.cancel()\n    this.notify(mutation)\n  }\n\n  clear(): void {\n    this.mutations.forEach(mutation => {\n      this.remove(mutation)\n    })\n  }\n\n  getAll(): Mutation[] {\n    return this.mutations\n  }\n\n  notify(mutation?: Mutation<any, any, any, any>) {\n    this.listeners.forEach(listener => {\n      listener(mutation)\n    })\n  }\n\n  onFocus(): void {\n    this.resumePausedMutations()\n  }\n\n  onOnline(): void {\n    this.resumePausedMutations()\n  }\n\n  resumePausedMutations(): Promise<void> {\n    const pausedMutations = this.mutations.filter(x => x.state.isPaused)\n\n    return pausedMutations.reduce(\n      (promise, mutation) =>\n        promise.then(() => mutation.continue().catch(noop)),\n      Promise.resolve()\n    )\n  }\n}\n","import type { QueryBehavior } from './query'\nimport { isCancelable } from './retryer'\nimport type { InfiniteData, QueryFunctionContext, QueryOptions } from './types'\n\nexport function infiniteQueryBehavior<\n  TQueryFnData,\n  TError,\n  TData\n>(): QueryBehavior<TQueryFnData, TError, InfiniteData<TData>> {\n  return {\n    onFetch: context => {\n      context.fetchFn = () => {\n        const fetchMore = context.fetchOptions?.meta?.fetchMore\n        const pageParam = fetchMore?.pageParam\n        const isFetchingNextPage = fetchMore?.direction === 'forward'\n        const isFetchingPreviousPage = fetchMore?.direction === 'backward'\n        const oldPages = context.state.data?.pages || []\n        const oldPageParams = context.state.data?.pageParams || []\n        let newPageParams = oldPageParams\n\n        // Get query function\n        const queryFn =\n          context.options.queryFn || (() => Promise.reject('Missing queryFn'))\n\n        // Create function to fetch a page\n        const fetchPage = (\n          pages: unknown[],\n          manual?: boolean,\n          param?: unknown,\n          previous?: boolean\n        ): Promise<unknown[]> => {\n          if (typeof param === 'undefined' && !manual && pages.length) {\n            return Promise.resolve(pages)\n          }\n\n          const queryFnContext: QueryFunctionContext = {\n            queryKey: context.queryKey,\n            pageParam: param,\n          }\n\n          let cancelFn: undefined | (() => any)\n          const queryFnResult = queryFn(queryFnContext)\n          if ((queryFnResult as any).cancel) {\n            cancelFn = (queryFnResult as any).cancel\n          }\n\n          const promise = Promise.resolve(queryFnResult).then(page => {\n            newPageParams = previous\n              ? [param, ...newPageParams]\n              : [...newPageParams, param]\n            return previous ? [page, ...pages] : [...pages, page]\n          })\n\n          if (cancelFn) {\n            const promiseAsAny = promise as any\n            promiseAsAny.cancel = cancelFn\n          }\n\n          return promise\n        }\n\n        let promise\n\n        // Fetch first page?\n        if (!oldPages.length) {\n          promise = fetchPage([])\n        }\n\n        // Fetch next page?\n        else if (isFetchingNextPage) {\n          const manual = typeof pageParam !== 'undefined'\n          const param = manual\n            ? pageParam\n            : getNextPageParam(context.options, oldPages)\n          promise = fetchPage(oldPages, manual, param)\n        }\n\n        // Fetch previous page?\n        else if (isFetchingPreviousPage) {\n          const manual = typeof pageParam !== 'undefined'\n          const param = manual\n            ? pageParam\n            : getPreviousPageParam(context.options, oldPages)\n          promise = fetchPage(oldPages, manual, param, true)\n        }\n\n        // Refetch pages\n        else {\n          newPageParams = []\n\n          const manual = typeof context.options.getNextPageParam === 'undefined'\n\n          // Fetch first page\n          promise = fetchPage([], manual, oldPageParams[0])\n\n          // Fetch remaining pages\n          for (let i = 1; i < oldPages.length; i++) {\n            promise = promise.then(pages => {\n              const param = manual\n                ? oldPageParams[i]\n                : getNextPageParam(context.options, pages)\n              return fetchPage(pages, manual, param)\n            })\n          }\n        }\n\n        const finalPromise = promise.then(pages => ({\n          pages,\n          pageParams: newPageParams,\n        }))\n\n        if (isCancelable(promise)) {\n          const finalPromiseAsAny = finalPromise as any\n          finalPromiseAsAny.cancel = promise.cancel\n        }\n\n        return finalPromise\n      }\n    },\n  }\n}\n\nexport function getNextPageParam(\n  options: QueryOptions<any, any>,\n  pages: unknown[]\n): unknown | undefined {\n  return options.getNextPageParam?.(pages[pages.length - 1], pages)\n}\n\nexport function getPreviousPageParam(\n  options: QueryOptions<any, any>,\n  pages: unknown[]\n): unknown | undefined {\n  return options.getPreviousPageParam?.(pages[0], pages)\n}\n\n/**\n * Checks if there is a next page.\n * Returns `undefined` if it cannot be determined.\n */\nexport function hasNextPage(\n  options: QueryOptions<any, any>,\n  pages?: unknown\n): boolean | undefined {\n  if (options.getNextPageParam && Array.isArray(pages)) {\n    const nextPageParam = getNextPageParam(options, pages)\n    return (\n      typeof nextPageParam !== 'undefined' &&\n      nextPageParam !== null &&\n      nextPageParam !== false\n    )\n  }\n}\n\n/**\n * Checks if there is a previous page.\n * Returns `undefined` if it cannot be determined.\n */\nexport function hasPreviousPage(\n  options: QueryOptions<any, any>,\n  pages?: unknown\n): boolean | undefined {\n  if (options.getPreviousPageParam && Array.isArray(pages)) {\n    const previousPageParam = getPreviousPageParam(options, pages)\n    return (\n      typeof previousPageParam !== 'undefined' &&\n      previousPageParam !== null &&\n      previousPageParam !== false\n    )\n  }\n}\n","import {\n  QueryFilters,\n  Updater,\n  hashQueryKey,\n  noop,\n  parseFilterArgs,\n  parseQueryArgs,\n  partialMatchKey,\n} from './utils'\nimport type {\n  DefaultOptions,\n  FetchInfiniteQueryOptions,\n  FetchQueryOptions,\n  InfiniteData,\n  InvalidateOptions,\n  InvalidateQueryFilters,\n  MutationKey,\n  MutationObserverOptions,\n  MutationOptions,\n  QueryFunction,\n  QueryKey,\n  QueryKeyWithRef,\n  QueryObserverOptions,\n  QueryOptions,\n  RefetchOptions,\n  ResetOptions,\n} from './types'\nimport type { QueryState, SetDataOptions } from './query'\nimport { QueryCache } from './queryCache'\nimport { MutationCache } from './mutationCache'\nimport { focusManager } from './focusManager'\nimport { onlineManager } from './onlineManager'\nimport { CancelOptions } from './retryer'\nimport { infiniteQueryBehavior } from './infiniteQueryBehavior'\n\n// TYPES\n\ninterface QueryClientConfig {\n  queryCache?: QueryCache\n  mutationCache?: MutationCache\n  defaultOptions?: DefaultOptions\n}\n\ninterface QueryDefaults {\n  queryKey: QueryKey\n  defaultOptions: QueryOptions<any, any, any>\n}\n\ninterface MutationDefaults {\n  mutationKey: MutationKey\n  defaultOptions: MutationOptions<any, any, any, any>\n}\n\n// CLASS\n\nexport class QueryClient {\n  private queryCache: QueryCache\n  private mutationCache: MutationCache\n  private defaultOptions: DefaultOptions\n  private queryDefaults: QueryDefaults[]\n  private mutationDefaults: MutationDefaults[]\n  private unsubscribeFocus?: () => void\n  private unsubscribeOnline?: () => void\n\n  constructor(config: QueryClientConfig = {}) {\n    this.queryCache = config.queryCache || new QueryCache()\n    this.mutationCache = config.mutationCache || new MutationCache()\n    this.defaultOptions = config.defaultOptions || {}\n    this.queryDefaults = []\n    this.mutationDefaults = []\n  }\n\n  mount(): void {\n    this.unsubscribeFocus = focusManager.subscribe(() => {\n      if (focusManager.isFocused() && onlineManager.isOnline()) {\n        this.mutationCache.onFocus()\n        this.queryCache.onFocus()\n      }\n    })\n    this.unsubscribeOnline = onlineManager.subscribe(() => {\n      if (focusManager.isFocused() && onlineManager.isOnline()) {\n        this.mutationCache.onOnline()\n        this.queryCache.onOnline()\n      }\n    })\n  }\n\n  unmount(): void {\n    this.unsubscribeFocus?.()\n    this.unsubscribeOnline?.()\n  }\n\n  isFetching(filters?: QueryFilters): number\n  isFetching(queryKey?: QueryKeyWithRef, filters?: QueryFilters): number\n  isFetching(\n    arg1?: QueryKeyWithRef | QueryFilters,\n    arg2?: QueryFilters\n  ): number {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    filters.fetching = true\n    return this.queryCache.findAll(filters).length\n  }\n\n  getQueryData<TData = unknown>(\n    queryKey: QueryKey,\n    filters?: QueryFilters\n  ): TData | undefined {\n    return this.queryCache.find<TData>(queryKey, filters)?.state.data\n  }\n\n  setQueryData<TData>(\n    queryKey: QueryKeyWithRef,\n    updater: Updater<TData | undefined, TData>,\n    options?: SetDataOptions\n  ): TData {\n    const parsedOptions = parseQueryArgs(queryKey)\n    const defaultedOptions = this.defaultQueryOptions(parsedOptions)\n    return this.queryCache\n      .build(this, defaultedOptions)\n      .setData(updater, options)\n  }\n\n  getQueryState<TData = unknown, TError = undefined>(\n    queryKey: QueryKeyWithRef,\n    filters?: QueryFilters\n  ): QueryState<TData, TError> | undefined {\n    return this.queryCache.find<TData, TError>(queryKey, filters)?.state\n  }\n\n  removeQueries(filters?: QueryFilters): void\n  removeQueries(queryKey?: QueryKeyWithRef, filters?: QueryFilters): void\n  removeQueries(\n    arg1?: QueryKeyWithRef | QueryFilters,\n    arg2?: QueryFilters\n  ): void {\n    const [filters] = parseFilterArgs(arg1, arg2)\n    const queryCache = this.queryCache\n    queryCache.findAll(filters).forEach(query => {\n      queryCache.remove(query)\n    })\n  }\n\n  resetQueries(filters?: QueryFilters, options?: ResetOptions): Promise<void>\n  resetQueries(\n    queryKey?: QueryKeyWithRef,\n    filters?: QueryFilters,\n    options?: ResetOptions\n  ): Promise<void>\n  resetQueries(\n    arg1?: QueryKeyWithRef | QueryFilters,\n    arg2?: QueryFilters | ResetOptions,\n    arg3?: ResetOptions\n  ): Promise<void> {\n    const [filters, options] = parseFilterArgs(arg1, arg2, arg3)\n    const queryCache = this.queryCache\n\n    const refetchFilters: QueryFilters = {\n      ...filters,\n      active: true,\n    }\n\n    queryCache.findAll(filters).forEach(query => {\n      query.reset()\n    })\n    return this.refetchQueries(refetchFilters, options)\n  }\n\n  cancelQueries(filters?: QueryFilters, options?: CancelOptions): Promise<void>\n  cancelQueries(\n    queryKey?: QueryKeyWithRef,\n    filters?: QueryFilters,\n    options?: CancelOptions\n  ): Promise<void>\n  cancelQueries(\n    arg1?: QueryKeyWithRef | QueryFilters,\n    arg2?: QueryFilters | CancelOptions,\n    arg3?: CancelOptions\n  ): Promise<void> {\n    const [filters, cancelOptions = {}] = parseFilterArgs(arg1, arg2, arg3)\n\n    if (typeof cancelOptions.revert === 'undefined') {\n      cancelOptions.revert = true\n    }\n\n    const promises = this.queryCache\n      .findAll(filters)\n      .map(query => query.cancel(cancelOptions))\n\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  invalidateQueries(\n    filters?: InvalidateQueryFilters,\n    options?: InvalidateOptions\n  ): Promise<void>\n  invalidateQueries(\n    queryKey?: QueryKeyWithRef,\n    filters?: InvalidateQueryFilters,\n    options?: InvalidateOptions\n  ): Promise<void>\n  invalidateQueries(\n    arg1?: QueryKeyWithRef | InvalidateQueryFilters,\n    arg2?: InvalidateQueryFilters | InvalidateOptions,\n    arg3?: InvalidateOptions\n  ): Promise<void> {\n    const [filters, options] = parseFilterArgs(arg1, arg2, arg3)\n\n    const refetchFilters: QueryFilters = {\n      ...filters,\n      active: filters.refetchActive ?? true,\n      inactive: filters.refetchInactive ?? false,\n    }\n\n    this.queryCache.findAll(filters).forEach(query => {\n      query.invalidate()\n    })\n    return this.refetchQueries(refetchFilters, options)\n  }\n\n  refetchQueries(\n    filters?: QueryFilters,\n    options?: RefetchOptions\n  ): Promise<void>\n  refetchQueries(\n    queryKey?: QueryKeyWithRef,\n    filters?: QueryFilters,\n    options?: RefetchOptions\n  ): Promise<void>\n  refetchQueries(\n    arg1?: QueryKeyWithRef | QueryFilters,\n    arg2?: QueryFilters | RefetchOptions,\n    arg3?: RefetchOptions\n  ): Promise<void> {\n    const [filters, options] = parseFilterArgs(arg1, arg2, arg3)\n\n    const promises = this.queryCache\n      .findAll(filters)\n      .map(query => query.fetch())\n\n    let promise = Promise.all(promises).then(noop)\n\n    if (!options?.throwOnError) {\n      promise = promise.catch(noop)\n    }\n\n    return promise\n  }\n\n  fetchQuery<TQueryFnData = unknown, TError = unknown, TData = TQueryFnData>(\n    options: FetchQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<TData>\n  fetchQuery<TQueryFnData = unknown, TError = unknown, TData = TQueryFnData>(\n    queryKey: QueryKeyWithRef,\n    options?: FetchQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<TData>\n  fetchQuery<TQueryFnData = unknown, TError = unknown, TData = TQueryFnData>(\n    queryKey: QueryKeyWithRef,\n    queryFn: QueryFunction<TQueryFnData>,\n    options?: FetchQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<TData>\n  fetchQuery<TQueryFnData, TError, TData = TQueryFnData>(\n    arg1: QueryKeyWithRef | FetchQueryOptions<TQueryFnData, TError, TData>,\n    arg2?:\n      | QueryFunction<TQueryFnData>\n      | FetchQueryOptions<TQueryFnData, TError, TData>,\n    arg3?: FetchQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<TData> {\n    const parsedOptions = parseQueryArgs(arg1, arg2, arg3)\n    const defaultedOptions = this.defaultQueryOptions(parsedOptions)\n\n    // https://github.com/tannerlinsley/react-query/issues/652\n    if (typeof defaultedOptions.retry === 'undefined') {\n      defaultedOptions.retry = false\n    }\n\n    const query = this.queryCache.build(this, defaultedOptions)\n\n    // @ts-ignore\n    return query.isStaleByTime(defaultedOptions.staleTime)\n      ? query.fetch(defaultedOptions)\n      : Promise.resolve(query.state.data as TData)\n  }\n\n  prefetchQuery(options: FetchQueryOptions): Promise<void>\n  prefetchQuery(queryKey: QueryKey, options?: FetchQueryOptions): Promise<void>\n  prefetchQuery(\n    queryKey: QueryKey,\n    queryFn: QueryFunction,\n    options?: FetchQueryOptions\n  ): Promise<void>\n  prefetchQuery(\n    arg1: QueryKey | FetchQueryOptions,\n    arg2?: QueryFunction | FetchQueryOptions,\n    arg3?: FetchQueryOptions\n  ): Promise<void> {\n    return this.fetchQuery(arg1 as any, arg2 as any, arg3)\n      .then(noop)\n      .catch(noop)\n  }\n\n  fetchInfiniteQuery<\n    TQueryFnData = unknown,\n    TError = unknown,\n    TData = TQueryFnData\n  >(\n    options: FetchInfiniteQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<InfiniteData<TData>>\n  fetchInfiniteQuery<\n    TQueryFnData = unknown,\n    TError = unknown,\n    TData = TQueryFnData\n  >(\n    queryKey: QueryKey,\n    options?: FetchInfiniteQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<InfiniteData<TData>>\n  fetchInfiniteQuery<\n    TQueryFnData = unknown,\n    TError = unknown,\n    TData = TQueryFnData\n  >(\n    queryKey: QueryKey,\n    queryFn: QueryFunction<TQueryFnData>,\n    options?: FetchInfiniteQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<InfiniteData<TData>>\n  fetchInfiniteQuery<TQueryFnData, TError, TData = TQueryFnData>(\n    arg1: QueryKey | FetchInfiniteQueryOptions<TQueryFnData, TError, TData>,\n    arg2?:\n      | QueryFunction<TQueryFnData>\n      | FetchInfiniteQueryOptions<TQueryFnData, TError, TData>,\n    arg3?: FetchInfiniteQueryOptions<TQueryFnData, TError, TData>\n  ): Promise<InfiniteData<TData>> {\n    const parsedOptions = parseQueryArgs(arg1, arg2, arg3)\n    parsedOptions.behavior = infiniteQueryBehavior<\n      TQueryFnData,\n      TError,\n      TData\n    >()\n    return this.fetchQuery(parsedOptions)\n  }\n\n  prefetchInfiniteQuery(options: FetchInfiniteQueryOptions): Promise<void>\n  prefetchInfiniteQuery(\n    queryKey: QueryKeyWithRef,\n    options?: FetchInfiniteQueryOptions\n  ): Promise<void>\n  prefetchInfiniteQuery(\n    queryKey: QueryKeyWithRef,\n    queryFn: QueryFunction,\n    options?: FetchInfiniteQueryOptions\n  ): Promise<void>\n  prefetchInfiniteQuery(\n    arg1: QueryKeyWithRef | FetchInfiniteQueryOptions,\n    arg2?: QueryFunction | FetchInfiniteQueryOptions,\n    arg3?: FetchInfiniteQueryOptions\n  ): Promise<void> {\n    return this.fetchInfiniteQuery(arg1 as any, arg2 as any, arg3)\n      .then(noop)\n      .catch(noop)\n  }\n\n  cancelMutations(): Promise<void> {\n    const promises = this.mutationCache\n      .getAll()\n      .map(mutation => mutation.cancel())\n\n    return Promise.all(promises).then(noop).catch(noop)\n  }\n\n  resumePausedMutations(): Promise<void> {\n    return this.getMutationCache().resumePausedMutations()\n  }\n\n  executeMutation<\n    TData = unknown,\n    TError = unknown,\n    TVariables = void,\n    TContext = unknown\n  >(\n    options: MutationOptions<TData, TError, TVariables, TContext>\n  ): Promise<TData> {\n    return this.mutationCache.build(this, options).execute()\n  }\n\n  getQueryCache(): QueryCache {\n    return this.queryCache\n  }\n\n  getMutationCache(): MutationCache {\n    return this.mutationCache\n  }\n\n  getDefaultOptions(): DefaultOptions {\n    return this.defaultOptions\n  }\n\n  setDefaultOptions(options: DefaultOptions): void {\n    this.defaultOptions = options\n  }\n\n  setQueryDefaults(\n    queryKey: QueryKey,\n    options: QueryObserverOptions<any, any, any, any>\n  ): void {\n    const result = this.queryDefaults.find(\n      x => hashQueryKey(queryKey) === hashQueryKey(x.queryKey)\n    )\n    if (result) {\n      result.defaultOptions = options\n    } else {\n      this.queryDefaults.push({ queryKey, defaultOptions: options })\n    }\n  }\n\n  getQueryDefaults(\n    queryKey?: QueryKey\n  ): QueryObserverOptions<any, any, any, any> | undefined {\n    return queryKey\n      ? this.queryDefaults.find(x => partialMatchKey(queryKey, x.queryKey))\n          ?.defaultOptions\n      : undefined\n  }\n\n  setMutationDefaults(\n    mutationKey: MutationKey,\n    options: MutationObserverOptions<any, any, any, any>\n  ): void {\n    const result = this.mutationDefaults.find(\n      x => hashQueryKey(mutationKey) === hashQueryKey(x.mutationKey)\n    )\n    if (result) {\n      result.defaultOptions = options\n    } else {\n      this.mutationDefaults.push({ mutationKey, defaultOptions: options })\n    }\n  }\n\n  getMutationDefaults(\n    mutationKey?: MutationKey\n  ): MutationObserverOptions<any, any, any, any> | undefined {\n    return mutationKey\n      ? this.mutationDefaults.find(x =>\n          partialMatchKey(mutationKey, x.mutationKey)\n        )?.defaultOptions\n      : undefined\n  }\n\n  defaultQueryOptions<T extends QueryOptions<any, any, any>>(options?: T): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.defaultOptions.queries,\n      ...this.getQueryDefaults(options?.queryKey),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  defaultQueryObserverOptions<\n    T extends QueryObserverOptions<any, any, any, any>\n  >(options?: T): T {\n    return this.defaultQueryOptions(options)\n  }\n\n  defaultMutationOptions<T extends MutationOptions<any, any, any, any>>(\n    options?: T\n  ): T {\n    if (options?._defaulted) {\n      return options\n    }\n    return {\n      ...this.defaultOptions.mutations,\n      ...this.getMutationDefaults(options?.mutationKey),\n      ...options,\n      _defaulted: true,\n    } as T\n  }\n\n  clear(): void {\n    this.queryCache.clear()\n    this.mutationCache.clear()\n  }\n}\n","import { reactive, readonly } from 'vue'\n\nimport {\n  getStatusProps,\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceEqualDeep,\n  timeUntilStale,\n} from './utils'\nimport type {\n  PlaceholderDataFunction,\n  QueryObserverBaseResult,\n  QueryObserverOptions,\n  QueryObserverResult,\n  QueryOptions,\n  RefetchOptions,\n  ResultOptions,\n} from './types'\nimport type { Query, QueryState, Action, FetchOptions } from './query'\nimport type { QueryClient } from './queryClient'\nimport { focusManager } from './focusManager'\nimport { Subscribable } from './subscribable'\n\ntype QueryObserverListener<TData, TError> = (\n  result: QueryObserverResult<TData, TError>\n) => void\n\ninterface NotifyOptions {\n  cache?: boolean\n  onError?: boolean\n  onSuccess?: boolean\n}\n\nexport interface ObserverFetchOptions extends FetchOptions {\n  throwOnError?: boolean\n}\n\nexport class QueryObserver<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData\n> extends Subscribable<QueryObserverListener<TData, TError>> {\n  options: QueryObserverOptions<TQueryFnData, TError, TData, TQueryData>\n\n  private client: QueryClient\n  private currentQuery!: Query<TQueryFnData, TError, TQueryData>\n  private currentResult!: QueryObserverResult<TData, TError>\n  private readonlyResult!: QueryObserverResult<TData, TError>\n  private currentResultState?: QueryState<TQueryData, TError>\n  private previousQueryResult?: QueryObserverResult<TData, TError>\n  private initialDataUpdateCount: number\n  private initialErrorUpdateCount: number\n  private staleTimeoutId?: number\n  private refetchIntervalId?: number\n\n  constructor(\n    client: QueryClient,\n    options: QueryObserverOptions<TQueryFnData, TError, TData, TQueryData>\n  ) {\n    super()\n\n    this.client = client\n    this.options = options\n    this.initialDataUpdateCount = 0\n    this.initialErrorUpdateCount = 0\n    this.bindMethods()\n    this.setOptions(options)\n  }\n\n  protected bindMethods(): void {\n    this.remove = this.remove.bind(this)\n    this.refetch = this.refetch.bind(this)\n  }\n\n  protected onSubscribe(): void {\n    if (this.listeners.length === 1) {\n      this.updateQuery()\n\n      this.currentQuery.addObserver(this)\n\n      if (this.willFetchOnMount()) {\n        this.executeFetch()\n      }\n\n      this.updateTimers()\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.length) {\n      this.destroy()\n    }\n  }\n\n  willLoadOnMount(): boolean {\n    return (\n      this.options.enabled !== false && !this.currentQuery.state.dataUpdatedAt\n    )\n  }\n\n  willRefetchOnMount(): boolean {\n    return (\n      this.options.enabled !== false &&\n      this.currentQuery.state.dataUpdatedAt > 0 &&\n      (this.options.refetchOnMount === 'always' ||\n        (this.options.refetchOnMount !== false && this.isStale()))\n    )\n  }\n\n  willFetchOnMount(): boolean {\n    return this.willLoadOnMount() || this.willRefetchOnMount()\n  }\n\n  willFetchOnReconnect(): boolean {\n    return (\n      this.options.enabled !== false &&\n      (this.options.refetchOnReconnect === 'always' ||\n        (this.options.refetchOnReconnect !== false && this.isStale()))\n    )\n  }\n\n  willFetchOnWindowFocus(): boolean {\n    return (\n      this.options.enabled !== false &&\n      (this.options.refetchOnWindowFocus === 'always' ||\n        (this.options.refetchOnWindowFocus !== false && this.isStale()))\n    )\n  }\n\n  private willFetchOptionally(): boolean {\n    return this.options.enabled !== false && this.isStale()\n  }\n\n  private isStale(): boolean {\n    return this.currentQuery.isStaleByTime(this.options.staleTime)\n  }\n\n  destroy(): void {\n    this.listeners = []\n    this.clearTimers()\n    this.currentQuery.removeObserver(this)\n  }\n\n  setOptions(\n    options?: QueryObserverOptions<TQueryFnData, TError, TData, TQueryData>\n  ): void {\n    const prevOptions = { ...this.options }\n    const prevQuery = this.currentQuery\n\n    this.options = this.client.defaultQueryObserverOptions(options)\n\n    if (\n      typeof this.options.enabled !== 'undefined' &&\n      typeof this.options.enabled !== 'boolean'\n    ) {\n      throw new Error('Expected enabled to be a boolean')\n    }\n\n    // Keep previous query key if the user does not supply one\n    if (!this.options.queryKey) {\n      this.options.queryKey = prevOptions.queryKey\n    }\n\n    this.updateQuery()\n\n    // Take no further actions if there are no subscribers\n    if (!this.listeners.length) {\n      return\n    }\n\n    // If we subscribed to a new query, optionally fetch and update refetch\n    if (this.currentQuery !== prevQuery) {\n      this.optionalFetch()\n      this.updateTimers()\n      return\n    }\n\n    // Optionally fetch if the query became enabled\n    if (this.options.enabled !== false && prevOptions.enabled === false) {\n      this.optionalFetch()\n    }\n\n    // Update stale interval if needed\n    if (\n      this.options.enabled !== prevOptions.enabled ||\n      this.options.staleTime !== prevOptions.staleTime\n    ) {\n      this.updateStaleTimeout()\n    }\n\n    // Update refetch interval if needed\n    if (\n      this.options.enabled !== prevOptions.enabled ||\n      this.options.refetchInterval !== prevOptions.refetchInterval\n    ) {\n      this.updateRefetchInterval()\n    }\n  }\n\n  protected getCurrentResult(): QueryObserverResult<TData, TError> {\n    return this.currentResult\n  }\n\n  getReadonlyResult(): QueryObserverResult<TData, TError> {\n    return (\n      this.readonlyResult ||\n      (this.readonlyResult = readonly(\n        this.currentResult\n      ) as QueryObserverResult<TData, TError>)\n    )\n  }\n\n  getNextResult(\n    options?: ResultOptions\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return new Promise((resolve, reject) => {\n      const unsubscribe = this.subscribe(result => {\n        if (!result.isFetching) {\n          unsubscribe()\n          if (result.isError && options?.throwOnError) {\n            reject(result.error)\n          } else {\n            resolve(result)\n          }\n        }\n      })\n    })\n  }\n\n  getCurrentQuery(): Query<TQueryFnData, TError, TQueryData> {\n    return this.currentQuery\n  }\n\n  remove(): void {\n    this.client.getQueryCache().remove(this.currentQuery)\n  }\n\n  refetch(\n    options?: RefetchOptions\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return this.fetch(options)\n  }\n\n  protected fetch(\n    fetchOptions?: ObserverFetchOptions\n  ): Promise<QueryObserverResult<TData, TError>> {\n    return this.executeFetch(fetchOptions).then(() => {\n      this.updateResult()\n      return this.currentResult\n    })\n  }\n\n  private optionalFetch(): void {\n    if (this.willFetchOptionally()) {\n      this.executeFetch()\n    }\n  }\n\n  private executeFetch(\n    fetchOptions?: ObserverFetchOptions\n  ): Promise<TQueryData | undefined> {\n    // Make sure we reference the latest query as the current one might have been removed\n    this.updateQuery()\n\n    // Fetch\n    let promise: Promise<TQueryData | undefined> = this.currentQuery.fetch(\n      this.options as QueryOptions<TQueryFnData, TError, TQueryData>,\n      fetchOptions\n    )\n\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop)\n    }\n\n    return promise\n  }\n\n  private updateStaleTimeout(): void {\n    this.clearStaleTimeout()\n\n    if (\n      isServer ||\n      this.currentResult.isStale ||\n      !isValidTimeout(this.options.staleTime)\n    ) {\n      return\n    }\n\n    const time = timeUntilStale(\n      this.currentResult.dataUpdatedAt,\n      this.options.staleTime\n    )\n\n    // The timeout is sometimes triggered 1 ms before the stale time expiration.\n    // To mitigate this issue we always add 1 ms to the timeout.\n    const timeout = time + 1\n\n    this.staleTimeoutId = setTimeout(() => {\n      if (!this.currentResult.isStale) {\n        this.updateResult()\n        this.notify({\n          cache: true,\n        })\n      }\n    }, timeout)\n  }\n\n  private updateRefetchInterval(): void {\n    this.clearRefetchInterval()\n\n    if (\n      isServer ||\n      this.options.enabled === false ||\n      !isValidTimeout(this.options.refetchInterval)\n    ) {\n      return\n    }\n\n    this.refetchIntervalId = setInterval(() => {\n      if (\n        this.options.refetchIntervalInBackground ||\n        focusManager.isFocused()\n      ) {\n        this.executeFetch()\n      }\n    }, this.options.refetchInterval)\n  }\n\n  private updateTimers(): void {\n    this.updateStaleTimeout()\n    this.updateRefetchInterval()\n  }\n\n  private clearTimers(): void {\n    this.clearStaleTimeout()\n    this.clearRefetchInterval()\n  }\n\n  private clearStaleTimeout(): void {\n    clearTimeout(this.staleTimeoutId)\n    this.staleTimeoutId = undefined\n  }\n\n  private clearRefetchInterval(): void {\n    clearInterval(this.refetchIntervalId)\n    this.refetchIntervalId = undefined\n  }\n\n  protected updateResult(willFetch?: boolean) {\n    const { state } = this.currentQuery\n    let { isFetching, status } = state\n    let isPreviousData = false\n    let isPlaceholderData = false\n    let data: TData | undefined\n    let dataUpdatedAt = state.dataUpdatedAt\n\n    // Optimistically set status to loading if we will start fetching\n    if (willFetch) {\n      isFetching = true\n      if (status === 'idle') {\n        status = 'loading'\n      }\n    }\n\n    // Keep previous data if needed\n    if (\n      this.options.keepPreviousData &&\n      !state.dataUpdateCount &&\n      this.previousQueryResult?.isSuccess\n    ) {\n      data = this.previousQueryResult.data\n      dataUpdatedAt = this.previousQueryResult.dataUpdatedAt\n      status = this.previousQueryResult.status\n      isPreviousData = true\n    }\n    // Select data if needed\n    else if (this.options.select && typeof state.data !== 'undefined') {\n      // Use the previous select result if the query data did not change\n      if (this.currentResult && state.data === this.currentResultState?.data) {\n        data = this.currentResult.data\n      } else {\n        data = this.options.select(state.data)\n        if (this.options.structuralSharing !== false) {\n          data = replaceEqualDeep(this.currentResult?.data, data)\n        }\n      }\n    }\n    // Use query data\n    else {\n      data = (state.data as unknown) as TData\n    }\n\n    // Show placeholder data if needed\n    if (\n      typeof this.options.placeholderData !== 'undefined' &&\n      typeof data === 'undefined' &&\n      status === 'loading'\n    ) {\n      const placeholderData =\n        typeof this.options.placeholderData === 'function'\n          ? (this.options.placeholderData as PlaceholderDataFunction<TData>)()\n          : this.options.placeholderData\n      if (typeof placeholderData !== 'undefined') {\n        status = 'success'\n        data = placeholderData\n        isPlaceholderData = true\n      }\n    }\n\n    const result: QueryObserverBaseResult<TData, TError> = {\n      ...getStatusProps(status),\n      data,\n      dataUpdatedAt,\n      error: state.error,\n      errorUpdatedAt: state.errorUpdateCount,\n      failureCount: state.fetchFailureCount,\n      isFetched: state.dataUpdateCount > 0 || state.errorUpdateCount > 0,\n      isFetchedAfterMount:\n        state.dataUpdateCount > this.initialDataUpdateCount ||\n        state.errorUpdateCount > this.initialErrorUpdateCount,\n      isFetching,\n      isLoadingError: status === 'error' && state.dataUpdatedAt === 0,\n      isPlaceholderData,\n      isPreviousData,\n      isRefetchError: status === 'error' && state.dataUpdatedAt !== 0,\n      isStale: this.isStale(),\n      refetch: this.refetch,\n      remove: this.remove,\n    }\n\n    if (this.currentResult) {\n      Object.assign(this.currentResult, result)\n    } else {\n      this.currentResult = reactive(result) as QueryObserverResult<\n        TData,\n        TError\n      >\n    }\n  }\n\n  private updateQuery(): void {\n    const prevQuery = this.currentQuery\n\n    const query = this.client\n      .getQueryCache()\n      .build(\n        this.client,\n        this.options as QueryOptions<TQueryFnData, TError, TQueryData>\n      )\n\n    if (query === prevQuery) {\n      return\n    }\n\n    this.previousQueryResult = { ...this.currentResult }\n    this.currentQuery = query\n    this.initialDataUpdateCount = query.state.dataUpdateCount\n    this.initialErrorUpdateCount = query.state.errorUpdateCount\n\n    const willFetch = prevQuery\n      ? this.willFetchOptionally()\n      : this.willFetchOnMount()\n\n    this.updateResult(willFetch)\n\n    if (!this.hasListeners()) {\n      return\n    }\n\n    prevQuery?.removeObserver(this)\n    this.currentQuery.addObserver(this)\n\n    this.notify({})\n  }\n\n  onQueryUpdate(action: Action<TData, TError>): void {\n    this.updateResult()\n    // Update timers\n    this.updateTimers()\n\n    // Determine which callbacks to trigger\n    const notifyOptions: NotifyOptions = {}\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true\n    }\n\n    this.notify(notifyOptions)\n  }\n\n  private notify(notifyOptions: NotifyOptions): void {\n    // First trigger the configuration callbacks\n    if (notifyOptions.onSuccess) {\n      this.options.onSuccess?.(this.readonlyResult.data!)\n      this.options.onSettled?.(this.readonlyResult.data!, null)\n    } else if (notifyOptions.onError) {\n      this.options.onError?.(this.readonlyResult.error!)\n      this.options.onSettled?.(undefined, this.readonlyResult.error!)\n    }\n\n    // Then trigger the listeners\n    this.listeners.forEach(listener => {\n      listener(this.readonlyResult)\n    })\n\n    // Then the cache listeners\n    if (notifyOptions.cache) {\n      this.client.getQueryCache().notify(this.currentQuery)\n    }\n  }\n}\n","import { difference, getQueryKeyHashFn } from './utils'\nimport type { QueryObserverOptions, QueryObserverResult } from './types'\nimport type { QueryClient } from './queryClient'\nimport { QueryObserver } from './queryObserver'\nimport { Subscribable } from './subscribable'\n\ntype QueriesObserverListener = (result: QueryObserverResult[]) => void\n\nexport class QueriesObserver extends Subscribable<QueriesObserverListener> {\n  private client: QueryClient\n  private result!: QueryObserverResult[]\n  private queries: QueryObserverOptions[]\n  private observers: QueryObserver[]\n\n  constructor(client: QueryClient, queries?: QueryObserverOptions[]) {\n    super()\n\n    this.client = client\n    this.queries = queries || []\n    this.observers = []\n\n    // Subscribe to queries\n    this.updateObservers()\n  }\n\n  protected onSubscribe(): void {\n    if (this.listeners.length === 1) {\n      this.observers.forEach(observer => {\n        observer.subscribe(result => {\n          this.onUpdate(observer, result)\n        })\n      })\n    }\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.length) {\n      this.destroy()\n    }\n  }\n\n  destroy(): void {\n    this.listeners = []\n    this.observers.forEach(observer => {\n      observer.destroy()\n    })\n  }\n\n  setQueries(queries: QueryObserverOptions[]): void {\n    this.queries = queries\n    this.updateObservers()\n  }\n\n  getCurrentResult(): QueryObserverResult[] {\n    return this.result\n  }\n\n  private updateObservers(): void {\n    let hasIndexChange = false\n\n    const prevObservers = this.observers\n    const newObservers = this.queries.map((options, i) => {\n      let observer: QueryObserver | undefined = prevObservers[i]\n\n      const defaultedOptions = this.client.defaultQueryObserverOptions(options)\n      const hashFn = getQueryKeyHashFn(defaultedOptions)\n      defaultedOptions.queryHash = hashFn(defaultedOptions.queryKey!)\n\n      if (\n        !observer ||\n        observer.getCurrentQuery().queryHash !== defaultedOptions.queryHash\n      ) {\n        hasIndexChange = true\n        observer = prevObservers.find(\n          x => x.getCurrentQuery().queryHash === defaultedOptions.queryHash\n        )\n      }\n\n      if (observer) {\n        observer.setOptions(defaultedOptions)\n        return observer\n      }\n\n      return new QueryObserver(this.client, defaultedOptions)\n    })\n\n    if (prevObservers.length === newObservers.length && !hasIndexChange) {\n      return\n    }\n\n    this.observers = newObservers\n    this.result = newObservers.map(observer => observer.getReadonlyResult())\n\n    if (!this.listeners.length) {\n      return\n    }\n\n    difference(prevObservers, newObservers).forEach(observer => {\n      observer.destroy()\n    })\n\n    difference(newObservers, prevObservers).forEach(observer => {\n      observer.subscribe(result => {\n        this.onUpdate(observer, result)\n      })\n    })\n\n    this.notify()\n  }\n\n  private onUpdate(observer: QueryObserver, result: QueryObserverResult): void {\n    const index = this.observers.indexOf(observer)\n    if (index !== -1) {\n      this.result[index] = result\n      this.notify()\n    }\n  }\n\n  private notify(): void {\n    this.listeners.forEach(listener => {\n      listener(this.result)\n    })\n  }\n}\n","import type {\n  FetchNextPageOptions,\n  FetchPreviousPageOptions,\n  InfiniteData,\n  InfiniteQueryObserverOptions,\n  InfiniteQueryObserverResult,\n} from './types'\nimport type { QueryClient } from './queryClient'\nimport { ObserverFetchOptions, QueryObserver } from './queryObserver'\nimport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior,\n} from './infiniteQueryBehavior'\n\ntype InfiniteQueryObserverListener<TData, TError> = (\n  result: InfiniteQueryObserverResult<TData, TError>\n) => void\n\nexport class InfiniteQueryObserver<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData,\n  TQueryData = TQueryFnData\n> extends QueryObserver<\n  TQueryFnData,\n  TError,\n  InfiniteData<TData>,\n  InfiniteData<TQueryData>\n> {\n  // Type override\n  subscribe!: (\n    listener?: InfiniteQueryObserverListener<TData, TError>\n  ) => () => void\n\n  // Type override\n  getCurrentResult!: () => InfiniteQueryObserverResult<TData, TError>\n\n  // Type override\n  protected fetch!: (\n    fetchOptions?: ObserverFetchOptions\n  ) => Promise<InfiniteQueryObserverResult<TData, TError>>\n\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(\n    client: QueryClient,\n    options: InfiniteQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData\n    >\n  ) {\n    super(client, options)\n  }\n\n  protected bindMethods(): void {\n    super.bindMethods()\n    this.fetchNextPage = this.fetchNextPage.bind(this)\n    this.fetchPreviousPage = this.fetchPreviousPage.bind(this)\n  }\n\n  setOptions(\n    options?: InfiniteQueryObserverOptions<\n      TQueryFnData,\n      TError,\n      TData,\n      TQueryData\n    >\n  ): void {\n    super.setOptions({\n      ...options,\n      behavior: infiniteQueryBehavior<TQueryFnData, TError, TData>(),\n    })\n  }\n\n  fetchNextPage(\n    options?: FetchNextPageOptions\n  ): Promise<InfiniteQueryObserverResult<TData, TError>> {\n    return this.fetch({\n      cancelRefetch: true,\n      throwOnError: options?.throwOnError,\n      meta: {\n        fetchMore: { direction: 'forward', pageParam: options?.pageParam },\n      },\n    })\n  }\n\n  fetchPreviousPage(\n    options?: FetchPreviousPageOptions\n  ): Promise<InfiniteQueryObserverResult<TData, TError>> {\n    return this.fetch({\n      cancelRefetch: true,\n      throwOnError: options?.throwOnError,\n      meta: {\n        fetchMore: { direction: 'backward', pageParam: options?.pageParam },\n      },\n    })\n  }\n\n  protected updateResult(willFetch?: boolean) {\n    const { state } = this.getCurrentQuery()\n    super.updateResult(willFetch)\n\n    Object.assign(super.getCurrentResult(), {\n      fetchNextPage: this.fetchNextPage,\n      fetchPreviousPage: this.fetchPreviousPage,\n      hasNextPage: hasNextPage(this.options, state.data?.pages),\n      hasPreviousPage: hasPreviousPage(this.options, state.data?.pages),\n      isFetchingNextPage:\n        state.isFetching && state.fetchMeta?.fetchMore?.direction === 'forward',\n      isFetchingPreviousPage:\n        state.isFetching &&\n        state.fetchMeta?.fetchMore?.direction === 'backward',\n    })\n  }\n}\n","import { Action, getDefaultState, Mutation } from './mutation'\nimport type { QueryClient } from './queryClient'\nimport { Subscribable } from './subscribable'\nimport type {\n  MutateOptions,\n  MutationObserverResult,\n  MutationObserverOptions,\n} from './types'\nimport { getStatusProps } from './utils'\n\n// TYPES\n\ntype MutationObserverListener<TData, TError, TVariables, TContext> = (\n  result: MutationObserverResult<TData, TError, TVariables, TContext>\n) => void\n\ninterface NotifyOptions {\n  listeners?: boolean\n  onError?: boolean\n  onSuccess?: boolean\n}\n\n// CLASS\n\nexport class MutationObserver<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n> extends Subscribable<\n  MutationObserverListener<TData, TError, TVariables, TContext>\n> {\n  options!: MutationObserverOptions<TData, TError, TVariables, TContext>\n\n  private client: QueryClient\n  private currentResult!: MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  >\n  private currentMutation?: Mutation<TData, TError, TVariables, TContext>\n  private mutateOptions?: MutateOptions<TData, TError, TVariables, TContext>\n\n  constructor(\n    client: QueryClient,\n    options: MutationObserverOptions<TData, TError, TVariables, TContext>\n  ) {\n    super()\n\n    this.client = client\n    this.setOptions(options)\n    this.bindMethods()\n    this.updateResult()\n  }\n\n  protected bindMethods(): void {\n    this.mutate = this.mutate.bind(this)\n    this.reset = this.reset.bind(this)\n  }\n\n  setOptions(\n    options?: MutationObserverOptions<TData, TError, TVariables, TContext>\n  ) {\n    this.options = this.client.defaultMutationOptions(options)\n  }\n\n  protected onUnsubscribe(): void {\n    if (!this.listeners.length) {\n      this.currentMutation?.removeObserver(this)\n    }\n  }\n\n  onMutationUpdate(action: Action<TData, TError, TVariables, TContext>): void {\n    this.updateResult()\n\n    // Determine which callbacks to trigger\n    const notifyOptions: NotifyOptions = {\n      listeners: true,\n    }\n\n    if (action.type === 'success') {\n      notifyOptions.onSuccess = true\n    } else if (action.type === 'error') {\n      notifyOptions.onError = true\n    }\n\n    this.notify(notifyOptions)\n  }\n\n  getCurrentResult(): MutationObserverResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  > {\n    return this.currentResult\n  }\n\n  reset(): void {\n    this.currentMutation = undefined\n    this.updateResult()\n    this.notify({ listeners: true })\n  }\n\n  mutate(\n    variables?: TVariables,\n    options?: MutateOptions<TData, TError, TVariables, TContext>\n  ): Promise<TData> {\n    this.mutateOptions = options\n\n    if (this.currentMutation) {\n      this.currentMutation.removeObserver(this)\n    }\n\n    this.currentMutation = this.client.getMutationCache().build(this.client, {\n      ...this.options,\n      variables: variables ?? this.options.variables,\n    })\n\n    this.currentMutation.addObserver(this)\n\n    return this.currentMutation.execute()\n  }\n\n  private updateResult(): void {\n    const state = this.currentMutation\n      ? this.currentMutation.state\n      : getDefaultState<TData, TError, TVariables, TContext>()\n\n    this.currentResult = {\n      ...state,\n      ...getStatusProps(state.status),\n      mutate: this.mutate,\n      reset: this.reset,\n    }\n  }\n\n  private notify(options: NotifyOptions) {\n    // First trigger the mutate callbacks\n    if (this.mutateOptions) {\n      if (options.onSuccess) {\n        this.mutateOptions.onSuccess?.(\n          this.currentResult.data!,\n          this.currentResult.variables!,\n          this.currentResult.context!\n        )\n        this.mutateOptions.onSettled?.(\n          this.currentResult.data!,\n          null,\n          this.currentResult.variables!,\n          this.currentResult.context\n        )\n      } else if (options.onError) {\n        this.mutateOptions.onError?.(\n          this.currentResult.error!,\n          this.currentResult.variables!,\n          this.currentResult.context\n        )\n        this.mutateOptions.onSettled?.(\n          undefined,\n          this.currentResult.error,\n          this.currentResult.variables!,\n          this.currentResult.context\n        )\n      }\n    }\n\n    // Then trigger the listeners\n    if (options.listeners) {\n      this.listeners.forEach(listener => {\n        listener(this.currentResult)\n      })\n    }\n  }\n}\n","import type { Logger } from '../core/logger'\n\nexport const logger: Logger = console\n","import { setLogger } from '../core'\nimport { logger } from './logger'\n\nif (logger) {\n  setLogger(logger)\n}\n","import { defineComponent, inject, onMounted, onUnmounted, provide } from 'vue'\n\nimport { QueryClient } from '../core'\n\nconst symbol = Symbol('QueryClientProvider')\n\nexport const useQueryClient = () => {\n  const queryClient = inject<QueryClient | undefined>(symbol, undefined)\n\n  if (!queryClient) {\n    throw new Error('No QueryClient set, use QueryClientProvider to set one')\n  }\n\n  return queryClient\n}\n\nexport interface QueryClientProviderProps {\n  client: QueryClient\n}\n\nexport const QueryClientProvider = defineComponent<QueryClientProviderProps>({\n  name: 'QueryClientProvider',\n  setup(props, { slots }) {\n    const { client } = props\n\n    provide(symbol, client)\n    onMounted(() => {\n      client.mount()\n    })\n    onUnmounted(() => {\n      client.unmount()\n    })\n\n    return slots.default?.()\n  },\n})\n","import { onMounted, onUnmounted, ref, Ref } from 'vue'\n\nimport { QueryKeyWithRef } from '../core/types'\nimport { parseFilterArgs, QueryFilters } from '../core/utils'\nimport { useQueryClient } from './QueryClientProvider'\n\nexport function useIsFetching(filters?: QueryFilters): Ref<number>\nexport function useIsFetching(\n  queryKey?: QueryKeyWithRef,\n  filters?: QueryFilters\n): Ref<number>\nexport function useIsFetching(\n  arg1?: QueryKeyWithRef | QueryFilters,\n  arg2?: QueryFilters\n): Ref<number> {\n  const queryClient = useQueryClient()\n  const [filters] = parseFilterArgs(arg1, arg2)\n\n  const isFetching = ref<number>(queryClient.isFetching(filters))\n\n  let unsubscribe: () => void\n  onMounted(() => {\n    unsubscribe = queryClient.getQueryCache().subscribe(() => {\n      const newIsFetching = queryClient.isFetching(filters)\n      isFetching.value = newIsFetching\n    })\n  })\n  onUnmounted(() => {\n    unsubscribe?.()\n  })\n\n  return isFetching\n}\n","import { reactive, readonly, watchEffect, onMounted, onUnmounted } from 'vue'\n\nimport { noop, parseMutationArgs } from '../core/utils'\nimport { MutationObserver } from '../core/mutationObserver'\nimport { useQueryClient } from './QueryClientProvider'\nimport {\n  UseMutateFunction,\n  UseMutationOptions,\n  UseMutationResult,\n} from './types'\nimport {\n  MutationFunction,\n  MutationKey,\n  MutationObserverResult,\n} from '../core/types'\n\n// HOOK\n\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  options: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  mutationFn: MutationFunction<TData, TVariables>,\n  options?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  mutationKey: MutationKey,\n  options?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  mutationKey: MutationKey,\n  mutationFn?: MutationFunction<TData, TVariables>,\n  options?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext>\nexport function useMutation<\n  TData = unknown,\n  TError = unknown,\n  TVariables = void,\n  TContext = unknown\n>(\n  arg1:\n    | MutationKey\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg2?:\n    | MutationFunction<TData, TVariables>\n    | UseMutationOptions<TData, TError, TVariables, TContext>,\n  arg3?: UseMutationOptions<TData, TError, TVariables, TContext>\n): UseMutationResult<TData, TError, TVariables, TContext> {\n  const queryClient = useQueryClient()\n\n  // Create mutation observer\n  let observer: MutationObserver<TData, TError, TVariables, TContext>\n\n  // Create mutation currentResult\n  let currentResult!: UseMutationResult<TData, TError, TVariables, TContext>\n\n  watchEffect(() => {\n    const options = parseMutationArgs(arg1, arg2, arg3)\n\n    if (observer) {\n      // Update options\n      if (observer.hasListeners()) {\n        observer.setOptions(options)\n      } else {\n        // init observer & currentResult\n        observer = new MutationObserver(queryClient, options)\n\n        const mutate: UseMutateFunction<TData, TError, TVariables, TContext> = (\n          variables,\n          mutateOptions\n        ) => {\n          observer.mutate(variables, mutateOptions).catch(noop)\n        }\n\n        currentResult = reactive({\n          ...observer.getCurrentResult(),\n          mutate,\n          mutateAsync: observer.getCurrentResult().mutate,\n        }) as UseMutationResult<TData, TError, TVariables, TContext>\n      }\n    }\n  })\n\n  let unsubscribe: () => void\n  onMounted(() => {\n    // Subscribe to the observer\n    unsubscribe = observer.subscribe(\n      (result: MutationObserverResult<TData, TError, TVariables, TContext>) => {\n        // Check if the component is still mounted\n        if (observer.hasListeners()) {\n          Object.assign(currentResult, result)\n        }\n      }\n    )\n  })\n  onUnmounted(() => {\n    unsubscribe?.()\n  })\n\n  return readonly(currentResult) as UseMutationResult<\n    TData,\n    TError,\n    TVariables,\n    TContext\n  >\n}\n","import { onMounted, onUnmounted, watchEffect } from 'vue'\n\nimport { QueryObserver } from '../core/queryObserver'\nimport { useQueryClient } from './QueryClientProvider'\nimport { UseBaseQueryOptions } from './types'\n\nexport function useBaseQuery<TQueryFnData, TError, TData, TQueryData>(\n  optionsFn: () => UseBaseQueryOptions<TQueryFnData, TError, TData, TQueryData>,\n  Observer: typeof QueryObserver\n) {\n  const queryClient = useQueryClient()\n\n  let observer!: QueryObserver<any, any, any, any>\n\n  watchEffect(() => {\n    const defaultedOptions = queryClient.defaultQueryObserverOptions(\n      optionsFn()\n    )\n\n    // Always set stale time when using suspense to prevent\n    // fetching again when directly re-mounting after suspense\n    if (\n      defaultedOptions.suspense &&\n      typeof defaultedOptions.staleTime !== 'number'\n    ) {\n      defaultedOptions.staleTime = 1000\n    }\n\n    if (observer) {\n      // Update options\n      if (observer.hasListeners()) {\n        observer.setOptions(defaultedOptions)\n      }\n    } else {\n      // Create query observer\n      observer = new Observer(queryClient, defaultedOptions)\n    }\n  })\n\n  const currentResult = observer.getReadonlyResult()\n\n  // Subscribe to the observer\n  let unsubscribe: () => void\n  onMounted(() => {\n    unsubscribe = observer.subscribe()\n  })\n  onUnmounted(() => {\n    unsubscribe?.()\n  })\n\n  // Handle suspense\n  if (observer.options.suspense && currentResult.isLoading) {\n    const unsubscribe = observer.subscribe()\n    throw observer.refetch().finally(unsubscribe)\n  }\n\n  return currentResult\n}\n","import { QueryObserver } from '../core'\nimport { QueryFunction, QueryKeyWithRef } from '../core/types'\nimport { parseQueryArgs } from '../core/utils'\nimport { UseQueryOptionsWithRef, UseQueryResult } from './types'\nimport { useBaseQuery } from './useBaseQuery'\n\n// HOOK\n\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n>(\n  options: UseQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseQueryResult<TData, TError>\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n>(\n  queryKey: QueryKeyWithRef,\n  options?: UseQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseQueryResult<TData, TError>\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n>(\n  queryKey: QueryKeyWithRef,\n  queryFn: QueryFunction<TQueryFnData>,\n  options?: UseQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseQueryResult<TData, TError>\nexport function useQuery<TQueryFnData, TError, TData = TQueryFnData>(\n  arg1: QueryKeyWithRef | UseQueryOptionsWithRef<TQueryFnData, TError, TData>,\n  arg2?:\n    | QueryFunction<TQueryFnData>\n    | UseQueryOptionsWithRef<TQueryFnData, TError, TData>,\n  arg3?: UseQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseQueryResult<TData, TError> {\n  return useBaseQuery(() => parseQueryArgs(arg1, arg2, arg3), QueryObserver)\n}\n","import { reactive, readonly, watchEffect, onMounted, onUnmounted } from 'vue'\n\nimport { QueriesObserver } from '../core/queriesObserver'\nimport { useQueryClient } from './QueryClientProvider'\nimport { UseQueryOptions, UseQueryResult } from './types'\nimport { replaceShallowEqualDeep } from '../core/utils'\n\nexport function useQueries(queries: UseQueryOptions[]): UseQueryResult[] {\n  const queryClient = useQueryClient()\n\n  // Create queries observer\n  let observer!: QueriesObserver\n\n  watchEffect(() => {\n    if (observer) {\n      // Update queries\n      if (observer.hasListeners()) {\n        observer.setQueries(queries)\n      }\n    } else {\n      observer = new QueriesObserver(queryClient, queries)\n    }\n  })\n\n  const currentResult = reactive(observer.getCurrentResult())\n\n  let unsubscribe: () => void\n  // Subscribe to the observer\n  onMounted(() => {\n    unsubscribe = observer.subscribe(result => {\n      replaceShallowEqualDeep(currentResult, result)\n    })\n  })\n  onUnmounted(() => {\n    unsubscribe?.()\n  })\n\n  return readonly(currentResult) as UseQueryResult[]\n}\n","import { QueryObserver } from '../core'\nimport { InfiniteQueryObserver } from '../core/infiniteQueryObserver'\nimport { QueryFunction, QueryKeyWithRef } from '../core/types'\nimport { parseQueryArgs } from '../core/utils'\nimport { UseInfiniteQueryOptionsWithRef, UseInfiniteQueryResult } from './types'\nimport { useBaseQuery } from './useBaseQuery'\n\n// HOOK\n\nexport function useInfiniteQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n>(\n  options: UseInfiniteQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseInfiniteQueryResult<TData, TError>\nexport function useInfiniteQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n>(\n  queryKey: QueryKeyWithRef,\n  options?: UseInfiniteQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseInfiniteQueryResult<TData, TError>\nexport function useInfiniteQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData\n>(\n  queryKey: QueryKeyWithRef,\n  queryFn: QueryFunction<TQueryFnData>,\n  options?: UseInfiniteQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseInfiniteQueryResult<TData, TError>\nexport function useInfiniteQuery<TQueryFnData, TError, TData = TQueryFnData>(\n  arg1:\n    | QueryKeyWithRef\n    | UseInfiniteQueryOptionsWithRef<TQueryFnData, TError, TData>,\n  arg2?:\n    | QueryFunction<TQueryFnData>\n    | UseInfiniteQueryOptionsWithRef<TQueryFnData, TError, TData>,\n  arg3?: UseInfiniteQueryOptionsWithRef<TQueryFnData, TError, TData>\n): UseInfiniteQueryResult<TData, TError> {\n  return useBaseQuery(\n    () => parseQueryArgs(arg1, arg2, arg3),\n    InfiniteQueryObserver as typeof QueryObserver\n  ) as UseInfiniteQueryResult<TData, TError>\n}\n"],"names":["_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","__proto__","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","isServer","window","noop","undefined","functionalUpdate","updater","input","isValidTimeout","value","Infinity","ensureArray","Array","isArray","difference","array1","array2","filter","x","indexOf","timeUntilStale","updatedAt","staleTime","Math","max","Date","now","parseQueryArgs","arg1","arg2","arg3","isQueryKey","queryKey","queryFn","unwrapRefs","parseMutationArgs","mutationKey","mutationFn","parseFilterArgs","matchQuery","filters","query","active","exact","fetching","inactive","predicate","stale","hashFn","getQueryKeyHashFn","options","queryHash","partialMatchKey","isActive","isStale","isFetching","queryKeyHashFn","hashQueryKey","stableValueHash","JSON","stringify","_","val","isPlainObject","keys","sort","reduce","result","a","b","partialDeepEqual","some","replaceEqualDeep","array","isSameObject","bSize","splice","aKeys","bKeys","hash","Set","len","has","replaceShallowEqualDeep","o","hasObjectPrototype","ctor","prot","toString","isError","Error","sleep","timeout","Promise","resolve","setTimeout","getStatusProps","status","isLoading","isSuccess","isIdle","refs","isRef","items","size","copy","logger","console","error","warn","log","getLogger","setLogger","newLogger","Subscribable","listeners","subscribe","listener","callback","push","onSubscribe","onUnsubscribe","hasListeners","FocusManager","removeEventListener","setDefaultEventListener","setEventListener","setup","focused","setFocused","onFocus","forEach","isFocused","document","includes","visibilityState","addEventListener","focusManager","OnlineManager","online","setOnline","onOnline","isOnline","navigator","onLine","onlineManager","defaultRetryDelay","failureCount","min","isCancelable","cancel","CancelledError","revert","silent","isCancelledError","Retryer","config","cancelRetry","cancelFn","continueFn","promiseResolve","promiseReject","cancelOptions","isPaused","isResolved","isTransportCancelable","promise","outerResolve","outerReject","reject","pause","continueResolve","onPause","then","onContinue","run","promiseOrValue","fn","retry","retryDelay","delay","shouldRetry","onFail","Query","defaultOptions","setOptions","observers","cache","initialState","state","getDefaultState","innerState","reactive","readonly","scheduleGc","cacheTime","setDefaultOptions","clearGcTimeout","gcTimeout","optionalRemove","clearTimeout","remove","setData","prevData","data","isDataEqual","structuralSharing","dispatch","type","dataUpdatedAt","setState","retryer","destroy","reset","observer","enabled","isInvalidated","getReadonlyResult","isStaleByTime","find","willFetchOnWindowFocus","refetch","willFetchOnReconnect","addObserver","notify","removeObserver","invalidate","fetch","fetchOptions","cancelRefetch","queryFnContext","pageParam","fetchFn","context","behavior","onFetch","fetchMeta","meta","action","reducer","onQueryUpdate","initialData","hasData","dataUpdateCount","errorUpdateCount","errorUpdatedAt","fetchFailureCount","QueryCache","queries","queriesMap","build","client","get","defaultQueryOptions","getQueryDefaults","add","queryInMap","clear","getAll","findAll","Mutation","mutationId","mutationCache","execute","restored","variables","onMutate","executeMutation","onSuccess","onSettled","onError","onMutationUpdate","MutationCache","mutations","mutation","defaultMutationOptions","getMutationDefaults","resumePausedMutations","pausedMutations","infiniteQueryBehavior","fetchMore","isFetchingNextPage","direction","isFetchingPreviousPage","oldPages","pages","oldPageParams","pageParams","newPageParams","fetchPage","manual","param","previous","queryFnResult","page","promiseAsAny","getNextPageParam","getPreviousPageParam","finalPromise","finalPromiseAsAny","hasNextPage","nextPageParam","hasPreviousPage","previousPageParam","QueryClient","queryCache","queryDefaults","mutationDefaults","mount","unsubscribeFocus","unsubscribeOnline","unmount","getQueryData","setQueryData","parsedOptions","defaultedOptions","getQueryState","removeQueries","resetQueries","refetchFilters","refetchQueries","cancelQueries","promises","map","all","invalidateQueries","refetchActive","refetchInactive","throwOnError","fetchQuery","prefetchQuery","fetchInfiniteQuery","prefetchInfiniteQuery","cancelMutations","getMutationCache","getQueryCache","getDefaultOptions","setQueryDefaults","setMutationDefaults","_defaulted","defaultQueryObserverOptions","QueryObserver","initialDataUpdateCount","initialErrorUpdateCount","bindMethods","bind","updateQuery","currentQuery","willFetchOnMount","executeFetch","updateTimers","willLoadOnMount","willRefetchOnMount","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","willFetchOptionally","clearTimers","prevOptions","prevQuery","optionalFetch","updateStaleTimeout","refetchInterval","updateRefetchInterval","getCurrentResult","currentResult","readonlyResult","getNextResult","unsubscribe","getCurrentQuery","updateResult","clearStaleTimeout","time","staleTimeoutId","clearRefetchInterval","refetchIntervalId","setInterval","refetchIntervalInBackground","clearInterval","willFetch","isPreviousData","isPlaceholderData","keepPreviousData","previousQueryResult","select","currentResultState","placeholderData","isFetched","isFetchedAfterMount","isLoadingError","isRefetchError","notifyOptions","QueriesObserver","updateObservers","onUpdate","setQueries","hasIndexChange","prevObservers","newObservers","index","InfiniteQueryObserver","fetchNextPage","fetchPreviousPage","MutationObserver","mutate","currentMutation","mutateOptions","symbol","Symbol","useQueryClient","queryClient","inject","QueryClientProvider","defineComponent","name","props","slots","provide","onMounted","onUnmounted","useIsFetching","ref","newIsFetching","useMutation","watchEffect","useBaseQuery","optionsFn","Observer","suspense","useQuery","useQueries","useInfiniteQuery"],"mappings":"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"}