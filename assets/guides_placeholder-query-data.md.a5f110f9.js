import{l as a,f as n,G as s}from"./framework.dc3bd9a4.js";const t='{"title":"Placeholder Query Data","description":"","frontmatter":{"id":"placeholder-query-data","title":"Placeholder Query Data"},"headers":[{"level":2,"title":"What is placeholder data?","slug":"what-is-placeholder-data"},{"level":2,"title":"Placeholder Data as a Value","slug":"placeholder-data-as-a-value"},{"level":3,"title":"Placeholder Data as a Function","slug":"placeholder-data-as-a-function"},{"level":3,"title":"Placeholder Data from Cache","slug":"placeholder-data-from-cache"}],"relativePath":"guides/placeholder-query-data.md","lastUpdated":1610472514943}',e={},o=s('<h2 id="what-is-placeholder-data"><a class="header-anchor" href="#what-is-placeholder-data" aria-hidden="true">#</a> What is placeholder data?</h2><p>Placeholder data allows a query to behave as if it already has data, similar to the <code>initialData</code> option, but <strong>the data is not persisted to the cache</strong>. This comes in handy for situations where you have enough partial (or fake) data to render the query successfully while the actual data is fetched in the background.</p><blockquote><p>Example: An individual blog post query could pull &quot;preview&quot; data from a parent list of blog posts that only include title and a small snippet of the post body. You would not want to persist this partial data to the query result of the individual query, but it is useful for showing the content layout as quickly as possible while the actual query finishes to fetch the entire object.</p></blockquote><p>There are a few ways to supply placeholder data for a query to the cache before you need it:</p><ul><li>Declaratively: <ul><li>Provide <code>placeholderData</code> to a query to prepopulate the its cache if empty</li></ul></li><li>Imperatively: <ul><li><a href="./prefetching.html">Prefetch or fetch the data using <code>queryClient</code> and the <code>placeholderData</code> option</a></li></ul></li></ul><h2 id="placeholder-data-as-a-value"><a class="header-anchor" href="#placeholder-data-as-a-value" aria-hidden="true">#</a> Placeholder Data as a Value</h2><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">&#39;todos&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/todos&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    placeholderData<span class="token operator">:</span> placeholderTodos<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h3 id="placeholder-data-as-a-function"><a class="header-anchor" href="#placeholder-data-as-a-function" aria-hidden="true">#</a> Placeholder Data as a Function</h3><p>If the process for accessing a query&#39;s placeholder data is intensive or just not something you want to perform on every render, you can pass a function as the <code>placeholderData</code> value. This function will be executed only once when the query is placeholderized, saving you precious memory and/or CPU:</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token string">&#39;todos&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/todos&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">placeholderData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token function">generateFakeTodos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h3 id="placeholder-data-from-cache"><a class="header-anchor" href="#placeholder-data-from-cache" aria-hidden="true">#</a> Placeholder Data from Cache</h3><p>In some circumstances, you may be able to provide the placeholder data for a query from the cached result of another. A good example of this would be searching the cached data from a blog post list query for a preview version of the post, then using that as the placeholder data for your individual post query:</p><div class="language-js"><pre><code><span class="token keyword">function</span> <span class="token function">Todo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> blogPostId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">useQuery</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;blogPost&#39;</span><span class="token punctuation">,</span> blogPostId<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/blogPosts&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">placeholderData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n      <span class="token comment">// Use the smaller/preview version of the blogPost from the &#39;blogPosts&#39; query as the placeholder data for this blogPost query</span>\n      <span class="token keyword">return</span> queryClient\n        <span class="token punctuation">.</span><span class="token function">getQueryData</span><span class="token punctuation">(</span><span class="token string">&#39;blogPosts&#39;</span><span class="token punctuation">)</span>\n        <span class="token operator">?.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>id <span class="token operator">===</span> blogPostId<span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n</code></pre></div>',13);e.render=function(s,t,e,p,c,l){return a(),n("div",null,[o])};export default e;export{t as __pageData};
